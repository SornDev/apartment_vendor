import{m as b}from"./ulmixins-6Aw97T0R.js";import{_ as C,c as n,a as s,w as d,i as v,v as r,d as y,F as h,j as g,f as w,q as _,r as x,o as i,k as c,e as k,t as m}from"./app-tVS7sfzb.js";const F={name:"DmsCus",mixins:[b],data(){return{CusData:{data:[]},CusForm:{name:"",last_name:"",gender:"male",address:"",tel:""}}},mounted(){},methods:{ChangeSort(){this.Sort=="asc"?this.Sort="desc":this.Sort="asc",this.GetCus()},AddCus(){this.FormType=!0,this.CusForm={name:"",last_name:"",gender:"male",address:"",tel:""};var o=new bootstrap.Modal(document.getElementById("cus-form"),{keyboard:!1});o.show()},SaveCus(){this.FormType?this.AddData("cus/add",this.CusForm,o=>{o.success&&(this.GetCus(),this.$refs.close_cus_form.click())}):this.UpdateData("cus/update/"+this.EditID,this.CusForm,o=>{o.success&&(this.GetCus(),this.$refs.close_cus_form.click())})},EditCus(o){this.EditData("cus/edit",o,e=>{this.CusForm=e,this.FormType=!1;var u=new bootstrap.Modal(document.getElementById("cus-form"),{keyboard:!1});u.show()})},DeleteCus(o){this.DeleteData("cus/delete",o,e=>{e.success&&this.GetCus()})},GetCus(o){this.GetData(`cus/get?page=${o}&perpage=${this.PerPage}&sort=${this.Sort}&search=${this.Search}`,e=>{this.CusData=e})}},created(){this.GetCus()},watch:{Search:function(o){o==""&&this.GetCus(1)}}},D={class:"card"},S=s("h5",{class:"card-header"},"ຂໍ້ມູນລູກຄ້າ",-1),V={class:"card-body"},G={class:"table-responsive text-nowrap"},U={class:"d-flex justify-content-between mb-2"},E={class:"d-flex justify-content-between align-items-center"},P={key:0,class:"bx bx-sort-up fs-4 me-2"},j={key:1,class:"bx bx-sort-down fs-4 me-2"},B=s("option",{value:"10"},"10",-1),M=s("option",{value:"20"},"20",-1),T=s("option",{value:"30"},"30",-1),N=[B,M,T],A={class:"d-flex"},I={class:"table table-bordered"},K=s("thead",null,[s("tr",{class:"table-info"},[s("th",{class:"fs-6 fw-bold"},"ຊື່ ແລະ ນາມສະກຸນ"),s("th",{class:"fs-6 fw-bold"},"ທີ່ຢູ່"),s("th",{class:"fs-6 fw-bold"},"ຂໍ້ມູນຕິດຕໍ່"),s("th",{class:"fs-6 fw-bold",width:"160"},"ປະຫວັດ ບໍລິການ"),s("th",{class:"fs-6 fw-bold",width:"90"},"ຈັດການ")])],-1),q={key:0},L=s("td",{class:"text-center"},[s("i",{class:"bx bxs-info-circle fs-4"})],-1),R={class:"text-center"},z={class:"dropdown"},H=s("button",{type:"button",class:"btn p-0 dropdown-toggle hide-arrow","data-bs-toggle":"dropdown"},[s("i",{class:"bx bx-dots-vertical-rounded"})],-1),J={class:"dropdown-menu"},O=["onClick"],Q=s("i",{class:"bx bx-edit-alt me-1"},null,-1),W=["onClick"],X=s("i",{class:"bx bx-trash me-1"},null,-1),Y={class:"modal modal-top modal-md fade","data-bs-backdrop":"static",id:"cus-form",tabindex:"-1",style:{display:"none"},"aria-hidden":"true"},Z={class:"modal-dialog"},$={class:"modal-content"},ss={class:"modal-header"},es={type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",ref:"close_cus_form"},ts={class:"modal-body pt-0"},os={class:"row mb-2"},ls={class:"col-md-6"},as=s("label",{for:"f-name",class:"fs-6"},"ຊື່:",-1),ds={class:"col-md-6"},ns=s("label",{for:"f-lastname",class:"fs-6"},"ນາມສະກຸນ:",-1),is={class:"row mb-2"},rs={class:"col-md-6"},cs=s("label",{for:"",class:"fs-6 me-2 mb-2"},"ເພດ:",-1),ms={class:"d-flex align-items-center"},us={class:"form-check me-2"},hs=s("label",{class:"form-check-label",for:"male"}," ຊາຍ ",-1),_s={class:"form-check me-2"},fs=s("label",{class:"form-check-label",for:"female"}," ຍິງ ",-1),ps={class:"col-md-6"},bs=s("label",{for:"tel",class:"form-label fs-6"},"ເບີໂທ:",-1),Cs={class:"row mb-2"},vs={class:"col-md-12"},ys=s("label",{for:"address",class:"form-label fs-6"},"ທີ່ຢູ່:",-1),gs={class:"d-flex justify-content-end mt-4"},ws=s("button",{type:"button",class:"btn btn-label-secondary","data-bs-dismiss":"modal"},"ຍົກເລີກ",-1);function xs(o,e,u,ks,l,a){const f=x("pagination");return i(),n(h,null,[s("div",D,[S,s("div",V,[s("div",G,[s("div",U,[s("div",E,[s("div",{class:"cursor-pointer",onClick:e[0]||(e[0]=t=>a.ChangeSort())},[o.Sort=="asc"?(i(),n("i",P)):(i(),n("i",j))]),d(s("select",{class:"form-select me-2","onUpdate:modelValue":e[1]||(e[1]=t=>o.PerPage=t),onChange:e[2]||(e[2]=t=>a.GetCus())},N,544),[[v,o.PerPage]])]),s("div",A,[d(s("input",{type:"text",class:"form-control me-2","onUpdate:modelValue":e[3]||(e[3]=t=>o.Search=t),onKeyup:e[4]||(e[4]=y(t=>a.GetCus(),["enter"])),placeholder:"ຄົ້ນຫາ..."},null,544),[[r,o.Search]]),s("button",{class:"btn btn-primary",onClick:e[5]||(e[5]=t=>a.AddCus())},"ເພີ່ມໃໝ່")])]),s("table",I,[K,s("tbody",null,[(i(!0),n(h,null,g(l.CusData.data,t=>(i(),n("tr",{key:t.id},[s("td",null,[c(" ທ່ານ "),t.gender=="female"?(i(),n("span",q,"ນ")):k("",!0),c(" "+m(t.name)+" "+m(t.last_name),1)]),s("td",null,m(t.address),1),s("td",null," ເບີໂທ: "+m(t.tel),1),L,s("td",R,[s("div",z,[H,s("div",J,[s("a",{class:"dropdown-item",href:"javascript:void(0);",onClick:p=>a.EditCus(t.id)},[Q,c(" ແກ້ໄຂ")],8,O),s("a",{class:"dropdown-item",href:"javascript:void(0);",onClick:p=>a.DeleteCus(t.id)},[X,c(" ລຶບ")],8,W)])])])]))),128))])]),w(f,{pagination:l.CusData,onPaginate:e[6]||(e[6]=t=>a.GetCus(t)),offset:4},null,8,["pagination"])])])]),s("div",Y,[s("div",Z,[s("form",$,[s("div",ss,[s("button",es,null,512)]),s("div",ts,[s("div",os,[s("div",ls,[as,d(s("input",{class:"form-control",type:"text","onUpdate:modelValue":e[7]||(e[7]=t=>l.CusForm.name=t),id:"f-name",placeholder:"..."},null,512),[[r,l.CusForm.name]])]),s("div",ds,[ns,d(s("input",{class:"form-control",type:"text","onUpdate:modelValue":e[8]||(e[8]=t=>l.CusForm.last_name=t),id:"f-lastname",placeholder:"..."},null,512),[[r,l.CusForm.last_name]])])]),s("div",is,[s("div",rs,[cs,s("div",ms,[s("div",us,[d(s("input",{name:"gender","onUpdate:modelValue":e[9]||(e[9]=t=>l.CusForm.gender=t),class:"form-check-input",type:"radio",value:"male",id:"male"},null,512),[[_,l.CusForm.gender]]),hs]),s("div",_s,[d(s("input",{name:"gender","onUpdate:modelValue":e[10]||(e[10]=t=>l.CusForm.gender=t),class:"form-check-input",type:"radio",value:"female",id:"female"},null,512),[[_,l.CusForm.gender]]),fs])])]),s("div",ps,[bs,d(s("input",{type:"text","onUpdate:modelValue":e[11]||(e[11]=t=>l.CusForm.tel=t),id:"tel",class:"form-control",placeholder:"..."},null,512),[[r,l.CusForm.tel]])])]),s("div",Cs,[s("div",vs,[ys,d(s("input",{type:"text","onUpdate:modelValue":e[12]||(e[12]=t=>l.CusForm.address=t),id:"address",class:"form-control",placeholder:"..."},null,512),[[r,l.CusForm.address]])])]),s("div",gs,[s("button",{type:"button",class:"btn btn-primary me-2",onClick:e[13]||(e[13]=t=>a.SaveCus())},"ບັນທຶກ"),ws])])])])])],64)}const Ss=C(F,[["render",xs]]);export{Ss as default};
