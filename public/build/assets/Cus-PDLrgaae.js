import{_ as v,u as g,m as y,r as w,o as l,c as n,b as s,d as c,w as r,g as k,v as m,l as x,F as f,h as S,e as D,n as p,i as _,t as u}from"./app-kNdbHso9.js";const F={setup(){return{store:g()}},name:"DmsCus",mixins:[y],data(){return{CusData:{data:[]},CusForm:{name:"",last_name:"",gender:"male",address:"",tel:""}}},mounted(){},methods:{ChangeSort(){this.Sort=="asc"?this.Sort="desc":this.Sort="asc",this.GetCus()},AddCus(){this.FormType=!0,this.CusForm={name:"",last_name:"",gender:"male",address:"",tel:""};var o=new bootstrap.Modal(document.getElementById("cus-form"),{keyboard:!1});o.show()},SaveCus(){this.FormType?this.AddData("cus/add",this.CusForm,o=>{o.success&&(this.GetCus(),this.$refs.close_cus_form.click())}):this.UpdateData("cus/update/"+this.EditID,this.CusForm,o=>{o.success&&(this.GetCus(),this.$refs.close_cus_form.click())})},EditCus(o){this.EditData("cus/edit",o,e=>{this.CusForm=e,this.FormType=!1;var h=new bootstrap.Modal(document.getElementById("cus-form"),{keyboard:!1});h.show()})},DeleteCus(o){this.DeleteData("cus/delete",o,e=>{e.success&&this.GetCus()})},GetCus(o){this.GetData(`cus/get?page=${o}&perpage=${this.PerPage}&sort=${this.Sort}&search=${this.Search}`,e=>{this.CusData=e})}},created(){this.GetCus()},watch:{Search:function(o){o==""&&this.GetCus(1)}}},U={class:"card"},E={class:"card-header d-flex"},V=s("h5",{class:"mb-0"},"ຂໍ້ມູນລູກຄ້າ",-1),G={key:0,class:"spinner-grow spinner-grow-sm text-warning ms-2",role:"status"},A=s("span",{class:"visually-hidden"},"Loading...",-1),N=[A],T={class:"card-body"},I={class:"table-responsive text-nowrap"},P={class:"d-flex justify-content-between mb-2"},j={class:"d-flex justify-content-between align-items-center"},B={key:0,class:"bx bx-sort-up fs-4 me-2"},J={key:1,class:"bx bx-sort-down fs-4 me-2"},L=s("option",{value:"10"},"10",-1),M=s("option",{value:"20"},"20",-1),O=s("option",{value:"30"},"30",-1),K=[L,M,O],R={class:"d-flex"},q={class:"table table-bordered shadow-sm"},z={class:"table-info"},H=s("th",{class:"fs-6 fw-bold"},"ຊື່ ແລະ ນາມສະກຸນ",-1),Q=s("th",{class:"fs-6 fw-bold"},"ທີ່ຢູ່",-1),W=s("th",{class:"fs-6 fw-bold"},"ຂໍ້ມູນຕິດຕໍ່",-1),X=s("th",{class:"fs-6 fw-bold",width:"160"},"ປະຫວັດ ບໍລິການ",-1),Y={key:0,class:"fs-6 fw-bold",width:"90"},Z={key:0},$={key:0},ss=s("td",{class:"text-center"},[s("i",{class:"bx bxs-info-circle fs-4"})],-1),es={key:0,class:"text-center"},ts={class:"dropdown"},os=s("button",{type:"button",class:"btn p-0 dropdown-toggle hide-arrow","data-bs-toggle":"dropdown"},[s("i",{class:"bx bx-dots-vertical-rounded"})],-1),ds={class:"dropdown-menu"},ls=["onClick"],ns=s("i",{class:"bx bx-edit-alt me-1"},null,-1),as=["onClick"],is=s("i",{class:"bx bx-trash me-1"},null,-1),rs={key:1},cs=s("tr",null,[s("td",{colspan:"5",class:"text-center"},[s("i",{class:"bx bxs-data me-1"}),_(" ບໍ່ມີຂໍ້ມູນ ")])],-1),ms=[cs],_s={class:"modal modal-top modal-md fade","data-bs-backdrop":"static",id:"cus-form",tabindex:"-1",style:{display:"none"},"aria-hidden":"true"},us={class:"modal-dialog"},hs={class:"modal-content"},fs={class:"modal-header"},ps={type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",ref:"close_cus_form"},bs={class:"modal-body pt-0"},Cs={class:"row mb-2"},vs={class:"col-md-6"},gs=s("label",{for:"f-name",class:"fs-6"},"ຊື່:",-1),ys={class:"col-md-6"},ws=s("label",{for:"f-lastname",class:"fs-6"},"ນາມສະກຸນ:",-1),ks={class:"row mb-2"},xs={class:"col-md-6"},Ss=s("label",{for:"",class:"fs-6 me-2 mb-2"},"ເພດ:",-1),Ds={class:"d-flex align-items-center"},Fs={class:"form-check me-2"},Us=s("label",{class:"form-check-label",for:"male"}," ຊາຍ ",-1),Es={class:"form-check me-2"},Vs=s("label",{class:"form-check-label",for:"female"}," ຍິງ ",-1),Gs={class:"col-md-6"},As=s("label",{for:"tel",class:"form-label fs-6"},"ເບີໂທ:",-1),Ns={class:"row mb-2"},Ts={class:"col-md-12"},Is=s("label",{for:"address",class:"form-label fs-6"},"ທີ່ຢູ່:",-1),Ps={class:"d-flex justify-content-end mt-4"},js=s("button",{type:"button",class:"btn btn-label-secondary","data-bs-dismiss":"modal"},"ຍົກເລີກ",-1);function Bs(o,e,h,a,d,i){const b=w("pagination");return l(),n(f,null,[s("div",U,[s("div",E,[V,o.loading_table?(l(),n("div",G,N)):c("",!0)]),s("div",T,[s("div",I,[s("div",P,[s("div",j,[s("div",{class:"cursor-pointer",onClick:e[0]||(e[0]=t=>i.ChangeSort())},[o.Sort=="asc"?(l(),n("i",B)):(l(),n("i",J))]),r(s("select",{class:"form-select me-2","onUpdate:modelValue":e[1]||(e[1]=t=>o.PerPage=t),onChange:e[2]||(e[2]=t=>i.GetCus())},K,544),[[k,o.PerPage]])]),s("div",R,[r(s("input",{type:"text",class:"form-control me-2","onUpdate:modelValue":e[3]||(e[3]=t=>o.Search=t),onKeyup:e[4]||(e[4]=x(t=>i.GetCus(),["enter"])),placeholder:"ຄົ້ນຫາ..."},null,544),[[m,o.Search]]),a.store.get_permissions.includes("CUS_ACC_EDIT")||JSON.parse(a.store.get_user).user_type=="admin"?(l(),n("button",{key:0,class:"btn btn-primary",onClick:e[5]||(e[5]=t=>i.AddCus())},"ເພີ່ມໃໝ່")):c("",!0)])]),s("table",q,[s("thead",null,[s("tr",z,[H,Q,W,X,a.store.get_permissions.includes("CUS_ACC_EDIT")||a.store.get_permissions.includes("CUS_ACC_DEL")||JSON.parse(a.store.get_user).user_type=="admin"?(l(),n("th",Y,"ຈັດການ")):c("",!0)])]),d.CusData.data.length>0?(l(),n("tbody",Z,[(l(!0),n(f,null,S(d.CusData.data,t=>(l(),n("tr",{key:t.id},[s("td",null,[_(" ທ່ານ "),t.gender=="female"?(l(),n("span",$,"ນ")):c("",!0),_(" "+u(t.name)+" "+u(t.last_name),1)]),s("td",null,u(t.address),1),s("td",null," ເບີໂທ: "+u(t.tel),1),ss,a.store.get_permissions.includes("CUS_ACC_EDIT")||a.store.get_permissions.includes("CUS_ACC_DEL")||JSON.parse(a.store.get_user).user_type=="admin"?(l(),n("td",es,[s("div",ts,[os,s("div",ds,[a.store.get_permissions.includes("CUS_ACC_EDIT")||JSON.parse(a.store.get_user).user_type=="admin"?(l(),n("a",{key:0,class:"dropdown-item",href:"javascript:void(0);",onClick:C=>i.EditCus(t.id)},[ns,_(" ແກ້ໄຂ")],8,ls)):c("",!0),a.store.get_permissions.includes("CUS_ACC_DEL")||JSON.parse(a.store.get_user).user_type=="admin"?(l(),n("a",{key:1,class:"dropdown-item",href:"javascript:void(0);",onClick:C=>i.DeleteCus(t.id)},[is,_(" ລຶບ")],8,as)):c("",!0)])])])):c("",!0)]))),128))])):(l(),n("tbody",rs,ms))]),D(b,{pagination:d.CusData,onPaginate:e[6]||(e[6]=t=>i.GetCus(t)),offset:4},null,8,["pagination"])])])]),s("div",_s,[s("div",us,[s("form",hs,[s("div",fs,[s("button",ps,null,512)]),s("div",bs,[s("div",Cs,[s("div",vs,[gs,r(s("input",{class:"form-control",type:"text","onUpdate:modelValue":e[7]||(e[7]=t=>d.CusForm.name=t),id:"f-name",placeholder:"..."},null,512),[[m,d.CusForm.name]])]),s("div",ys,[ws,r(s("input",{class:"form-control",type:"text","onUpdate:modelValue":e[8]||(e[8]=t=>d.CusForm.last_name=t),id:"f-lastname",placeholder:"..."},null,512),[[m,d.CusForm.last_name]])])]),s("div",ks,[s("div",xs,[Ss,s("div",Ds,[s("div",Fs,[r(s("input",{name:"gender","onUpdate:modelValue":e[9]||(e[9]=t=>d.CusForm.gender=t),class:"form-check-input",type:"radio",value:"male",id:"male"},null,512),[[p,d.CusForm.gender]]),Us]),s("div",Es,[r(s("input",{name:"gender","onUpdate:modelValue":e[10]||(e[10]=t=>d.CusForm.gender=t),class:"form-check-input",type:"radio",value:"female",id:"female"},null,512),[[p,d.CusForm.gender]]),Vs])])]),s("div",Gs,[As,r(s("input",{type:"text","onUpdate:modelValue":e[11]||(e[11]=t=>d.CusForm.tel=t),id:"tel",class:"form-control",placeholder:"..."},null,512),[[m,d.CusForm.tel]])])]),s("div",Ns,[s("div",Ts,[Is,r(s("input",{type:"text","onUpdate:modelValue":e[12]||(e[12]=t=>d.CusForm.address=t),id:"address",class:"form-control",placeholder:"..."},null,512),[[m,d.CusForm.address]])])]),s("div",Ps,[s("button",{type:"button",class:"btn btn-primary me-2",onClick:e[13]||(e[13]=t=>i.SaveCus())},"ບັນທຶກ"),js])])])])])],64)}const Ls=v(F,[["render",Bs]]);export{Ls as default};
