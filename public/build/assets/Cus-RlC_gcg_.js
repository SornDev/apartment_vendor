import{m as v}from"./ulmixins-3GuYya29.js";import{_ as y,u as g,c as d,a as s,w as r,m as k,h as m,j as x,f as c,F as f,r as w,e as S,v as p,g as D,o as a,b as u,t as _}from"./app-R5zms-zh.js";const F={setup(){return{store:g()}},name:"DmsCus",mixins:[v],data(){return{CusData:{data:[]},CusForm:{name:"",last_name:"",gender:"male",address:"",tel:""}}},mounted(){},methods:{ChangeSort(){this.Sort=="asc"?this.Sort="desc":this.Sort="asc",this.GetCus()},AddCus(){this.FormType=!0,this.CusForm={name:"",last_name:"",gender:"male",address:"",tel:""};var o=new bootstrap.Modal(document.getElementById("cus-form"),{keyboard:!1});o.show()},SaveCus(){this.FormType?this.AddData("cus/add",this.CusForm,o=>{o.success&&(this.GetCus(),this.$refs.close_cus_form.click())}):this.UpdateData("cus/update/"+this.EditID,this.CusForm,o=>{o.success&&(this.GetCus(),this.$refs.close_cus_form.click())})},EditCus(o){this.EditData("cus/edit",o,e=>{this.CusForm=e,this.FormType=!1;var h=new bootstrap.Modal(document.getElementById("cus-form"),{keyboard:!1});h.show()})},DeleteCus(o){this.DeleteData("cus/delete",o,e=>{e.success&&this.GetCus()})},GetCus(o){this.GetData(`cus/get?page=${o}&perpage=${this.PerPage}&sort=${this.Sort}&search=${this.Search}`,e=>{this.CusData=e})}},created(){this.GetCus()},watch:{Search:function(o){o==""&&this.GetCus(1)}}},U={class:"card"},E=s("h5",{class:"card-header"},"ຂໍ້ມູນລູກຄ້າ",-1),V={class:"card-body"},G={class:"table-responsive text-nowrap"},A={class:"d-flex justify-content-between mb-2"},N={class:"d-flex justify-content-between align-items-center"},T={key:0,class:"bx bx-sort-up fs-4 me-2"},I={key:1,class:"bx bx-sort-down fs-4 me-2"},P=s("option",{value:"10"},"10",-1),j=s("option",{value:"20"},"20",-1),B=s("option",{value:"30"},"30",-1),J=[P,j,B],M={class:"d-flex"},O={class:"table table-bordered"},L={class:"table-info"},K=s("th",{class:"fs-6 fw-bold"},"ຊື່ ແລະ ນາມສະກຸນ",-1),R=s("th",{class:"fs-6 fw-bold"},"ທີ່ຢູ່",-1),q=s("th",{class:"fs-6 fw-bold"},"ຂໍ້ມູນຕິດຕໍ່",-1),z=s("th",{class:"fs-6 fw-bold",width:"160"},"ປະຫວັດ ບໍລິການ",-1),H={key:0,class:"fs-6 fw-bold",width:"90"},Q={key:0},W={key:0},X=s("td",{class:"text-center"},[s("i",{class:"bx bxs-info-circle fs-4"})],-1),Y={key:0,class:"text-center"},Z={class:"dropdown"},$=s("button",{type:"button",class:"btn p-0 dropdown-toggle hide-arrow","data-bs-toggle":"dropdown"},[s("i",{class:"bx bx-dots-vertical-rounded"})],-1),ss={class:"dropdown-menu"},es=["onClick"],ts=s("i",{class:"bx bx-edit-alt me-1"},null,-1),os=["onClick"],ls=s("i",{class:"bx bx-trash me-1"},null,-1),ds={key:1},as=s("tr",null,[s("td",{colspan:"5",class:"text-center"},[s("i",{class:"bx bxs-data me-1"}),u(" ບໍ່ມີຂໍ້ມູນ ")])],-1),ns=[as],is={class:"modal modal-top modal-md fade","data-bs-backdrop":"static",id:"cus-form",tabindex:"-1",style:{display:"none"},"aria-hidden":"true"},rs={class:"modal-dialog"},cs={class:"modal-content"},ms={class:"modal-header"},us={type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",ref:"close_cus_form"},_s={class:"modal-body pt-0"},hs={class:"row mb-2"},fs={class:"col-md-6"},ps=s("label",{for:"f-name",class:"fs-6"},"ຊື່:",-1),bs={class:"col-md-6"},Cs=s("label",{for:"f-lastname",class:"fs-6"},"ນາມສະກຸນ:",-1),vs={class:"row mb-2"},ys={class:"col-md-6"},gs=s("label",{for:"",class:"fs-6 me-2 mb-2"},"ເພດ:",-1),ks={class:"d-flex align-items-center"},xs={class:"form-check me-2"},ws=s("label",{class:"form-check-label",for:"male"}," ຊາຍ ",-1),Ss={class:"form-check me-2"},Ds=s("label",{class:"form-check-label",for:"female"}," ຍິງ ",-1),Fs={class:"col-md-6"},Us=s("label",{for:"tel",class:"form-label fs-6"},"ເບີໂທ:",-1),Es={class:"row mb-2"},Vs={class:"col-md-12"},Gs=s("label",{for:"address",class:"form-label fs-6"},"ທີ່ຢູ່:",-1),As={class:"d-flex justify-content-end mt-4"},Ns=s("button",{type:"button",class:"btn btn-label-secondary","data-bs-dismiss":"modal"},"ຍົກເລີກ",-1);function Ts(o,e,h,n,l,i){const b=D("pagination");return a(),d(f,null,[s("div",U,[E,s("div",V,[s("div",G,[s("div",A,[s("div",N,[s("div",{class:"cursor-pointer",onClick:e[0]||(e[0]=t=>i.ChangeSort())},[o.Sort=="asc"?(a(),d("i",T)):(a(),d("i",I))]),r(s("select",{class:"form-select me-2","onUpdate:modelValue":e[1]||(e[1]=t=>o.PerPage=t),onChange:e[2]||(e[2]=t=>i.GetCus())},J,544),[[k,o.PerPage]])]),s("div",M,[r(s("input",{type:"text",class:"form-control me-2","onUpdate:modelValue":e[3]||(e[3]=t=>o.Search=t),onKeyup:e[4]||(e[4]=x(t=>i.GetCus(),["enter"])),placeholder:"ຄົ້ນຫາ..."},null,544),[[m,o.Search]]),n.store.get_permissions.includes("CUS_ACC_EDIT")||JSON.parse(n.store.get_user).user_type=="admin"?(a(),d("button",{key:0,class:"btn btn-primary",onClick:e[5]||(e[5]=t=>i.AddCus())},"ເພີ່ມໃໝ່")):c("",!0)])]),s("table",O,[s("thead",null,[s("tr",L,[K,R,q,z,n.store.get_permissions.includes("CUS_ACC_EDIT")||n.store.get_permissions.includes("CUS_ACC_DEL")||JSON.parse(n.store.get_user).user_type=="admin"?(a(),d("th",H,"ຈັດການ")):c("",!0)])]),l.CusData.data.length>0?(a(),d("tbody",Q,[(a(!0),d(f,null,w(l.CusData.data,t=>(a(),d("tr",{key:t.id},[s("td",null,[u(" ທ່ານ "),t.gender=="female"?(a(),d("span",W,"ນ")):c("",!0),u(" "+_(t.name)+" "+_(t.last_name),1)]),s("td",null,_(t.address),1),s("td",null," ເບີໂທ: "+_(t.tel),1),X,n.store.get_permissions.includes("CUS_ACC_EDIT")||n.store.get_permissions.includes("CUS_ACC_DEL")||JSON.parse(n.store.get_user).user_type=="admin"?(a(),d("td",Y,[s("div",Z,[$,s("div",ss,[n.store.get_permissions.includes("CUS_ACC_EDIT")||JSON.parse(n.store.get_user).user_type=="admin"?(a(),d("a",{key:0,class:"dropdown-item",href:"javascript:void(0);",onClick:C=>i.EditCus(t.id)},[ts,u(" ແກ້ໄຂ")],8,es)):c("",!0),n.store.get_permissions.includes("CUS_ACC_DEL")||JSON.parse(n.store.get_user).user_type=="admin"?(a(),d("a",{key:1,class:"dropdown-item",href:"javascript:void(0);",onClick:C=>i.DeleteCus(t.id)},[ls,u(" ລຶບ")],8,os)):c("",!0)])])])):c("",!0)]))),128))])):(a(),d("tbody",ds,ns))]),S(b,{pagination:l.CusData,onPaginate:e[6]||(e[6]=t=>i.GetCus(t)),offset:4},null,8,["pagination"])])])]),s("div",is,[s("div",rs,[s("form",cs,[s("div",ms,[s("button",us,null,512)]),s("div",_s,[s("div",hs,[s("div",fs,[ps,r(s("input",{class:"form-control",type:"text","onUpdate:modelValue":e[7]||(e[7]=t=>l.CusForm.name=t),id:"f-name",placeholder:"..."},null,512),[[m,l.CusForm.name]])]),s("div",bs,[Cs,r(s("input",{class:"form-control",type:"text","onUpdate:modelValue":e[8]||(e[8]=t=>l.CusForm.last_name=t),id:"f-lastname",placeholder:"..."},null,512),[[m,l.CusForm.last_name]])])]),s("div",vs,[s("div",ys,[gs,s("div",ks,[s("div",xs,[r(s("input",{name:"gender","onUpdate:modelValue":e[9]||(e[9]=t=>l.CusForm.gender=t),class:"form-check-input",type:"radio",value:"male",id:"male"},null,512),[[p,l.CusForm.gender]]),ws]),s("div",Ss,[r(s("input",{name:"gender","onUpdate:modelValue":e[10]||(e[10]=t=>l.CusForm.gender=t),class:"form-check-input",type:"radio",value:"female",id:"female"},null,512),[[p,l.CusForm.gender]]),Ds])])]),s("div",Fs,[Us,r(s("input",{type:"text","onUpdate:modelValue":e[11]||(e[11]=t=>l.CusForm.tel=t),id:"tel",class:"form-control",placeholder:"..."},null,512),[[m,l.CusForm.tel]])])]),s("div",Es,[s("div",Vs,[Gs,r(s("input",{type:"text","onUpdate:modelValue":e[12]||(e[12]=t=>l.CusForm.address=t),id:"address",class:"form-control",placeholder:"..."},null,512),[[m,l.CusForm.address]])])]),s("div",As,[s("button",{type:"button",class:"btn btn-primary me-2",onClick:e[13]||(e[13]=t=>i.SaveCus())},"ບັນທຶກ"),Ns])])])])])],64)}const js=y(F,[["render",Ts]]);export{js as default};
