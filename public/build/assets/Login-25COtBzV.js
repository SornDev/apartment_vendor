import{_ as d,u as h,c as r,a as s,w as _,h as p,i as u,j as m,f as l,t as c,b as g,o as n}from"./app-R5zms-zh.js";const w={name:"Minipos14Login",setup(){return{store:h()}},data(){return{user_name:"",email:"",password:"",check_email_text:"",check_pass_text:"",show_pass:"password",text_error:"",url:window.location.origin,loading:!1}},computed:{check_from_login(){var t=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;return this.email&&(t.test(this.email)?this.check_email_text="":this.check_email_text="ອີເມວລ໌ບໍ່ຖຶກຕ້ອງ"),this.password?this.password.length<6?this.check_pass_text="ລະຫັດຜ່ານ ຕ້ອງຫຼາຍກ່ວາ 5 ຕົວອັກສອນ":this.check_pass_text="":this.check_pass_text="",this.user_name==""||this.password.length<6?!0:!!this.loading}},mounted(){},methods:{login(){this.user_name!=""&&this.password!=""&&(this.loading=!0,axios.post("api/login",{login_user:this.user_name,login_password:this.password}).then(t=>{this.loading=!1,t.data.success?(this.user_name="",this.password="",this.$router.push("/"),localStorage.setItem("web_token",t.data.token),localStorage.setItem("web_user",JSON.stringify(t.data.user)),localStorage.setItem("web_permission",t.data.permissions),localStorage.setItem("web_setting",JSON.stringify(t.data.setting))):this.text_error=t.data.message}).catch(t=>{console.log(t)}))}}},f={class:"d-flex justify-content-center"},x={class:"authentication-wrapper authentication-basic container-p-y col-md-4"},b={class:"authentication-inner"},k={class:"card"},v={class:"card-body"},y={class:"text-center"},S=["src"],V={class:"mb-3"},N=s("label",{for:"email",class:"form-label fs-6"},"ຊື່ຜູ້ໃຊ້:",-1),j={class:"mb-3 form-password-toggle"},B=s("div",{class:"d-flex justify-content-between"},[s("label",{class:"form-label fs-6",for:"password"},"ລະຫັດຜ່ານ:")],-1),D={class:"input-group input-group-merge"},I=["type"],M={key:0,class:"bx bx-hide"},C={key:1,class:"bx bx-show"},J={key:0,class:"alert alert-warning",role:"alert"},K={class:"mb-3"},L=["disabled"],O={key:0},T=s("span",{class:"spinner-border me-1",role:"status","aria-hidden":"true"},null,-1),U={key:1},E=s("p",{class:"text-center"}," DMS V 1.1 Beta ",-1);function R(t,o,q,z,e,a){return n(),r("div",f,[s("div",x,[s("div",b,[s("div",k,[s("div",v,[s("div",y,[s("img",{src:e.url+"/assets/img/dms_logo.jpg",width:"40%",alt:"",srcset:""},null,8,S)]),s("div",V,[N,_(s("input",{type:"text",class:"form-control","onUpdate:modelValue":o[0]||(o[0]=i=>e.user_name=i),id:"email",placeholder:"...."},null,512),[[p,e.user_name]])]),s("div",j,[B,s("div",D,[_(s("input",{type:e.show_pass,id:"password",onKeyup:o[1]||(o[1]=m(i=>a.login(),["enter"])),"onUpdate:modelValue":o[2]||(o[2]=i=>e.password=i),class:"form-control",placeholder:"············"},null,40,I),[[u,e.password]]),s("span",{class:"input-group-text cursor-pointer",onClick:o[3]||(o[3]=i=>e.show_pass=="password"?e.show_pass="text":e.show_pass="password")},[e.show_pass=="password"?(n(),r("i",M)):l("",!0),e.show_pass=="text"?(n(),r("i",C)):l("",!0)])])]),e.check_email_text||e.check_pass_text||e.text_error?(n(),r("div",J,c(e.check_email_text)+" "+c(e.check_pass_text)+" "+c(e.text_error),1)):l("",!0),s("div",K,[s("button",{class:"btn btn-primary d-grid w-100",disabled:a.check_from_login,onClick:o[4]||(o[4]=i=>a.login())},[e.loading?(n(),r("span",O,[T,g(" ກຳລັງກວດສອບ... ")])):(n(),r("span",U,"ເຂົ້າສູ່ລະບົບ"))],8,L)]),E])])])])])}const F=d(w,[["render",R]]);export{F as default};
