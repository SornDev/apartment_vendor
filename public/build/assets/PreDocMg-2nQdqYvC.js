import{m as w}from"./ulmixins-6Aw97T0R.js";import{_ as x,o as n,c,a as s,w as h,v as u,d as k,f,F as g,j as C,t as b,k as p,e as m,r as D,p as $,l as F}from"./app-tVS7sfzb.js";const S={mixins:[w],name:"DmsCateDoc",emits:["catid"],data(){return{doc_cat_name:{name:"",price:0},doc_cat_id:"",DocCatData:{data:[]}}},computed:{check_bt(){return this.doc_cat_name.name==""?!0:!!this.loading_post}},mounted(){},methods:{sent_id(e){this.doc_cat_id=e,this.$emit("catid",e)},AddDocCat(){this.FormType=!0,this.doc_cat_name.name="",this.doc_cat_name.price=0;var e=new bootstrap.Modal(document.getElementById("doc_cat"),{keyboard:!1});e.show()},SaveDocCat(){this.FormType?this.AddData("doccat/add",this.doc_cat_name,e=>{e.success&&(this.$refs.close_doc_cat.click(),this.GetDocCat())}):this.UpdateData("doccat/update/"+this.EditID,this.doc_cat_name,e=>{this.$refs.close_doc_cat.click(),this.GetDocCat()})},EditDocCat(e){this.FormType=!1,this.GetData("doccat/edit/"+e,t=>{this.doc_cat_name=t,this.EditID=e;var r=new bootstrap.Modal(document.getElementById("doc_cat"),{keyboard:!1});r.show()})},DeleteDocCat(e){this.DeleteData("doccat/delete",e,t=>{t.success&&this.GetDocCat()})},GetDocCat(e){this.GetData(`doccat?page=${e}&perpage=${this.PerPage}&short=${this.Sort}&search=${this.Search}`,t=>{this.DocCatData=t,this.doc_cat_id==""&&this.DocCatData.data.length>0&&(this.doc_cat_id=this.DocCatData.data[0].id,this.$emit("catid",this.doc_cat_id))})}},created(){this.GetDocCat()},watch:{Search(){this.Search==""&&this.GetDocCat()}}},G={class:"card"},j={class:"d-flex justify-content-between p-3"},E={class:"text-wrap"},I=s("i",{class:"bx bx-plus fs-4"},null,-1),V=[I],U={class:"table-responsive text-nowrap"},A={class:"table"},M={class:"ms-4 me-4"},L=s("thead",null,[s("tr",{class:"border table-info"},[s("th",{class:"fs-6 fw-bold"},"ຊື່ປະເພດເອກະສານ"),s("th",{class:"fs-6 fw-bold",width:"150"},"ລາຄາບໍລິການ"),s("th",{class:"fs-6 fw-bold text-center",width:"100"},"ຈັດການ"),s("th",{class:"p-0",width:"45"})])],-1),T={key:0},B={key:0},P=s("td",{colspan:"2",class:"text-center"},[s("div",{class:"spinner-border text-warning",role:"status"},[s("span",{class:"visually-hidden"},"Loading...")])],-1),R=[P],N=["onClick"],K={class:"text-end"},q={class:"text-center"},z={class:"dropdown"},H=s("button",{type:"button",class:"btn p-0 dropdown-toggle hide-arrow","data-bs-toggle":"dropdown"},[s("i",{class:"bx bx-dots-vertical-rounded"})],-1),J={class:"dropdown-menu"},O=["onClick"],Q=s("i",{class:"bx bx-edit-alt me-1"},null,-1),W=["onClick"],X=s("i",{class:"bx bx-trash me-1"},null,-1),Y={class:"p-0"},Z={class:"d-flex align-items-center justify-content-center"},ss={key:0,class:"bx bxs-right-arrow-circle fs-4 text-warning"},ts={key:1},es=s("tr",null,[s("td",{colspan:"3",class:"text-center"},[s("i",{class:"bx bxs-data me-1"}),p(" ບໍ່ມີຂໍ້ມູນ ")])],-1),os=[es],is={class:"modal modal-top fade","data-bs-backdrop":"static",id:"doc_cat",tabindex:"-1",style:{display:"none"},"aria-hidden":"true"},ds={class:"modal-dialog"},ns={class:"modal-content"},cs={class:"modal-header"},as={type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",ref:"close_doc_cat"},ls={class:"modal-body pt-0"},rs={class:"row"},ps={class:"col-12 mb-3"},_s=s("label",{class:"form-label fs-6"},[p("ຊື່ປະເພດເອກະສານ: "),s("span",{class:"text-danger"},"*")],-1),ms={class:"col-6 mb-3"},hs=s("label",{class:"form-label fs-6"},"ລາຄາບໍລິການ: ",-1),us={class:"input-group"},fs=s("span",{class:"input-group-text cursor-pointer"}," ກີບ ",-1),gs={class:"d-flex justify-content-end"},bs=["disabled"],Ds={key:0},xs={key:1,class:"spinner-border text-warning",role:"status"},vs=s("span",{class:"visually-hidden"},"Loading...",-1),ys=[vs],ws=s("button",{type:"button",class:"btn btn-label-secondary","data-bs-dismiss":"modal"},"ຍົກເລີກ",-1);function ks(e,t,r,v,d,i){const o=D("pagination"),_=D("cleave");return n(),c(g,null,[s("div",G,[s("div",j,[s("div",E,[h(s("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=l=>e.Search=l),onKeyup:t[1]||(t[1]=k(l=>i.GetDocCat(),["enter"])),class:"form-control",placeholder:"ຄົ້ນຫາ..."},null,544),[[u,e.Search]])]),s("button",{type:"button",class:"btn rounded-pill btn-icon btn-info",onClick:t[2]||(t[2]=l=>i.AddDocCat())},V)]),s("div",U,[s("table",A,[s("caption",M,[f(o,{pagination:d.DocCatData,onPaginate:t[3]||(t[3]=l=>i.GetDocCat(l)),offset:4},null,8,["pagination"])]),L,d.DocCatData.data.length>0?(n(),c("tbody",T,[e.loading_table?(n(),c("tr",B,R)):(n(!0),c(g,{key:1},C(d.DocCatData.data,l=>(n(),c("tr",{class:"cursor-pointer",key:l.id,onClick:y=>i.sent_id(l.id)},[s("td",null,b(l.name),1),s("td",K,b(e.formatPrice(l.price))+" ກີບ",1),s("td",q,[s("div",z,[H,s("div",J,[s("a",{class:"dropdown-item",href:"javascript:void(0);",onClick:y=>i.EditDocCat(l.id)},[Q,p(" ແກ້ໄຂ")],8,O),s("a",{class:"dropdown-item",href:"javascript:void(0);",onClick:y=>i.DeleteDocCat(l.id)},[X,p(" ລຶບ")],8,W)])])]),s("td",Y,[s("div",Z,[d.doc_cat_id==l.id?(n(),c("i",ss)):m("",!0)])])],8,N))),128))])):(n(),c("tbody",ts,os))])])]),s("div",is,[s("div",ds,[s("form",ns,[s("div",cs,[s("button",as,null,512)]),s("div",ls,[s("div",rs,[s("div",ps,[_s,h(s("input",{type:"text","onUpdate:modelValue":t[4]||(t[4]=l=>d.doc_cat_name.name=l),class:"form-control",placeholder:"...."},null,512),[[u,d.doc_cat_name.name]])]),s("div",ms,[hs,s("div",us,[f(_,{options:e.options,modelValue:d.doc_cat_name.price,"onUpdate:modelValue":t[5]||(t[5]=l=>d.doc_cat_name.price=l),class:"form-control text-end",placeholder:"...."},null,8,["options","modelValue"]),fs])])]),s("div",gs,[s("button",{type:"button",class:"btn btn-primary me-2",disabled:i.check_bt,onClick:t[6]||(t[6]=l=>i.SaveDocCat())},[e.loading_post?(n(),c("div",xs,ys)):(n(),c("span",Ds,"ບັນທຶກ"))],8,bs),ws])])])])])],64)}const Cs=x(S,[["render",ks]]),$s={mixins:[w],name:"DmsDoc",props:{catid:{type:Number}},data(){return{url:window.location.origin,DocData:[],upimg_pre:window.location.origin+"/assets/img/photo.png",upexp_pre:window.location.origin+"/assets/img/upload.png",upform_pre:window.location.origin+"/assets/img/upload.png",DocForm:{cat_id:"",doc_name:"",image:"",doc_example:"",doc_form:"",notice:""}}},computed:{check_bt(){return this.DocForm.doc_name==""?!0:!!this.loading_post}},mounted(){},methods:{downloadItem(e,t){window.open(e,"_blank")},rm_dimg(){this.DocForm.image="",this.upimg_pre=this.url+"/assets/img/photo.png"},rm_dexp(){this.DocForm.doc_example="",this.upexp_pre=this.url+"/assets/img/upload.png"},rm_dform(){this.DocForm.doc_form="",this.upform_pre=this.url+"/assets/img/upload.png"},onSelectImage(e){var t=e.target.files[0];if(t){this.DocForm.image=t;var r=new FileReader;r.onloadend=()=>{t.type.includes("image")?this.upimg_pre=r.result:t.type.includes("word")?this.upimg_pre=this.url+"/assets/img/word.png":t.type.includes("pdf")?this.upimg_pre=this.url+"/assets/img/pdf.png":this.upimg_pre=this.url+"/assets/img/document.png"},r.readAsDataURL(t)}},onSelectDocExample(e){var t=e.target.files[0];if(t){this.DocForm.doc_example=t;var r=new FileReader;r.onloadend=()=>{t.type.includes("image")?this.upexp_pre=r.result:t.type.includes("word")?this.upexp_pre=this.url+"/assets/img/word.png":t.type.includes("pdf")?this.upexp_pre=this.url+"/assets/img/pdf.png":this.upexp_pre=this.url+"/assets/img/document.png"},r.readAsDataURL(t)}},onSelectDocForm(e){var t=e.target.files[0];if(t){this.DocForm.doc_form=t;var r=new FileReader;r.onloadend=()=>{t.type.includes("image")?this.upform_pre=r.result:t.type.includes("word")?this.upform_pre=this.url+"/assets/img/word.png":t.type.includes("pdf")?this.upform_pre=this.url+"/assets/img/pdf.png":this.upform_pre=this.url+"/assets/img/document.png"},r.readAsDataURL(t)}},AddDoc(){this.FormType=!0,this.DocForm={cat_id:this.catid,doc_name:"",image:"",doc_example:"",doc_form:"",notice:""},this.upimg_pre=window.location.origin+"/assets/img/photo.png",this.upexp_pre=window.location.origin+"/assets/img/upload.png",this.upform_pre=window.location.origin+"/assets/img/upload.png";var e=new bootstrap.Modal(document.getElementById("docm"),{keyboard:!1});e.show()},SaveDoc(){this.FormType?this.AddData("doc/add",this.DocForm,e=>{e.success&&(this.$refs.close_docm.click(),this.GetDoc())}):this.UpdateData("doc/update/"+this.EditID,this.DocForm,e=>{e.success&&(this.$refs.close_docm.click(),this.GetDoc())})},EditDoc(e){this.EditData("doc/edit",e,t=>{this.DocForm=t,this.FormType=!1,this.EditID=e;var r=new bootstrap.Modal(document.getElementById("docm"),{keyboard:!1});r.show(),t.image?t.image.includes("jpg")||t.image.includes("jpeg")||t.image.includes("png")?this.upimg_pre=this.url+"/assets/file/"+t.image:t.image.includes("doc")||t.image.includes("docx")?this.upimg_pre=this.url+"/assets/img/word.png":t.image.includes("pdf")?this.upimg_pre=this.url+"/assets/img/pdf.png":this.upimg_pre=this.url+"/assets/img/document.png":this.upimg_pre=this.url+"/assets/img/photo.png",t.doc_example?t.doc_example.includes("jpg")||t.doc_example.includes("jpeg")||t.doc_example.includes("png")?this.upexp_pre=this.url+"/assets/file/"+t.doc_example:t.doc_example.includes("doc")||t.doc_example.includes("docx")?this.upexp_pre=this.url+"/assets/img/word.png":t.doc_example.includes("pdf")?this.upexp_pre=this.url+"/assets/img/pdf.png":this.upexp_pre=this.url+"/assets/img/document.png":this.upexp_pre=this.url+"/assets/img/upload.png",t.doc_form?t.doc_form.includes("jpg")||t.doc_form.includes("jpeg")||t.doc_form.includes("png")?this.upform_pre=this.url+"/assets/file/"+t.doc_form:t.doc_form.includes("doc")||t.doc_form.includes("docx")?this.upform_pre=this.url+"/assets/img/word.png":t.doc_form.includes("pdf")?this.upform_pre=this.url+"/assets/img/pdf.png":this.upform_pre=this.url+"/assets/img/document.png":this.upform_pre=this.url+"/assets/img/upload.png"})},DeleteDoc(e){this.DeleteData("doc/delete",e,t=>{t.success&&this.GetDoc()})},GetDoc(){this.GetData(`doc/get/${this.catid}?search=${this.Search}`,e=>{this.DocData=e})}},watch:{catid:function(e){e!=null&&this.GetDoc()},Search:function(e){e==""&&this.GetDoc()}}},a=e=>($("data-v-91893e4b"),e=e(),F(),e),Fs={class:"card"},Ss={class:"d-flex justify-content-between p-3"},Gs={class:"text-wrap"},js=["disabled"],Es=a(()=>s("i",{class:"bx bx-plus fs-4"},null,-1)),Is=[Es],Vs={class:"table-responsive text-nowrap"},Us={class:"table"},As=a(()=>s("thead",null,[s("tr",{class:"border table-info"},[s("th",{class:"fs-6 fw-bold"},"ລາຍການເອກະສານ"),s("th",{class:"fs-6 fw-bold text-center",width:"120"},"ຈັດການ")])],-1)),Ms={key:0},Ls={key:0},Ts=a(()=>s("td",{colspan:"2",class:"text-center"},[s("div",{class:"spinner-border text-warning",role:"status"},[s("span",{class:"visually-hidden"},"Loading...")])],-1)),Bs=[Ts],Ps={key:0,class:"text-danger"},Rs={class:"text-center"},Ns={class:"dropdown"},Ks=a(()=>s("button",{type:"button",class:"btn p-0 dropdown-toggle hide-arrow","data-bs-toggle":"dropdown"},[s("i",{class:"bx bx-dots-vertical-rounded"})],-1)),qs={class:"dropdown-menu"},zs=a(()=>s("a",{class:"dropdown-item",href:"javascript:void(0);"},[s("i",{class:"bx bxs-info-circle me-1"}),p(" ເບີ່ງ")],-1)),Hs=["onClick"],Js=a(()=>s("i",{class:"bx bx-edit-alt me-1"},null,-1)),Os=["onClick"],Qs=a(()=>s("i",{class:"bx bx-trash me-1"},null,-1)),Ws={key:1},Xs=a(()=>s("tr",null,[s("td",{colspan:"2",class:"text-center"},[s("i",{class:"bx bxs-data me-1"}),p(" ບໍ່ມີຂໍ້ມູນ ")])],-1)),Ys=[Xs],Zs={class:"modal modal-top modal-lg fade",id:"docm",tabindex:"-1","data-bs-backdrop":"static",style:{display:"none"},"aria-hidden":"true"},st={class:"modal-dialog"},tt={class:"modal-content"},et={class:"modal-header"},ot={type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",ref:"close_docm"},it={class:"modal-body pt-0"},dt={class:"row"},nt={class:"col-6 mb-3"},ct=a(()=>s("label",{class:"form-label fs-6"},[p("ຊື່ເອກະສານ "),s("span",{class:"text-danger"},"*")],-1)),at={class:"row"},lt={class:"col mb-3"},rt=a(()=>s("label",{class:"form-label fs-6 text-danger"},"ໝາຍເຫດ",-1)),pt={class:"row"},_t={class:"col-md-4",style:{position:"relative"}},mt=a(()=>s("i",{class:"bx bxs-x-circle"},null,-1)),ht=[mt],ut=a(()=>s("label",{class:"form-label fs-6"},"ຮູບພາບ",-1)),ft=a(()=>s("br",null,null,-1)),gt=["src"],bt=a(()=>s("br",null,null,-1)),Dt={class:"col-md-4",style:{position:"relative"}},xt=a(()=>s("i",{class:"bx bxs-x-circle"},null,-1)),vt=[xt],yt=a(()=>s("label",{class:"form-label fs-6"},"ຕົວຢ່າງເອກະສານ",-1)),wt=a(()=>s("br",null,null,-1)),kt=["src"],Ct={class:"col-md-4",style:{position:"relative"}},$t=a(()=>s("i",{class:"bx bxs-x-circle"},null,-1)),Ft=[$t],St=a(()=>s("label",{class:"form-label fs-6"},"ຟອມເອກະສານ",-1)),Gt=a(()=>s("br",null,null,-1)),jt=["src"],Et={class:"d-flex justify-content-end mt-4"},It=["disabled"],Vt={key:0},Ut={key:1,class:"spinner-border text-warning",role:"status"},At=a(()=>s("span",{class:"visually-hidden"},"Loading...",-1)),Mt=[At],Lt=a(()=>s("button",{type:"button",class:"btn btn-label-secondary","data-bs-dismiss":"modal"},"ຍົກເລີກ",-1));function Tt(e,t,r,v,d,i){return n(),c(g,null,[s("div",Fs,[s("div",Ss,[s("div",Gs,[h(s("input",{type:"text",class:"form-control","onUpdate:modelValue":t[0]||(t[0]=o=>e.Search=o),onKeyup:t[1]||(t[1]=k(o=>i.GetDoc(),["enter"])),placeholder:"ຄົ້ນຫາ..."},null,544),[[u,e.Search]])]),s("button",{type:"button",class:"btn rounded-pill btn-icon btn-info",disabled:!r.catid,onClick:t[2]||(t[2]=o=>i.AddDoc())},Is,8,js)]),s("div",Vs,[s("table",Us,[As,d.DocData.length>0?(n(),c("tbody",Ms,[e.loading_table?(n(),c("tr",Ls,Bs)):(n(!0),c(g,{key:1},C(d.DocData,o=>(n(),c("tr",{key:o.id},[s("td",null,[p(b(o.doc_name)+" ",1),o.notice?(n(),c("span",Ps,"("+b(o.notice)+") ",1)):m("",!0)]),s("td",Rs,[s("div",Ns,[Ks,s("div",qs,[zs,s("a",{class:"dropdown-item",href:"javascript:void(0);",onClick:_=>i.EditDoc(o.id)},[Js,p(" ແກ້ໄຂ")],8,Hs),s("a",{class:"dropdown-item",href:"javascript:void(0);",onClick:_=>i.DeleteDoc(o.id)},[Qs,p(" ລຶບ")],8,Os)])])])]))),128))])):(n(),c("tbody",Ws,Ys))])])]),s("div",Zs,[s("div",st,[s("form",tt,[s("div",et,[s("button",ot,null,512)]),s("div",it,[s("div",dt,[s("div",nt,[ct,h(s("input",{type:"text","onUpdate:modelValue":t[3]||(t[3]=o=>d.DocForm.doc_name=o),class:"form-control",placeholder:"...."},null,512),[[u,d.DocForm.doc_name]])])]),s("div",at,[s("div",lt,[rt,h(s("input",{type:"text","onUpdate:modelValue":t[4]||(t[4]=o=>d.DocForm.notice=o),class:"form-control",placeholder:"...."},null,512),[[u,d.DocForm.notice]])])]),s("div",pt,[s("div",_t,[d.DocForm.image?(n(),c("span",{key:0,class:"text-danger x-icon",onClick:t[5]||(t[5]=o=>i.rm_dimg())},ht)):m("",!0),ut,ft,s("img",{src:d.upimg_pre,class:"rounded exp-img cursor-pointer",onClick:t[6]||(t[6]=o=>e.$refs.doc_img.click())},null,8,gt),s("input",{type:"file",ref:"doc_img",onChange:t[7]||(t[7]=(...o)=>i.onSelectImage&&i.onSelectImage(...o)),style:{display:"none"},class:"form-control",placeholder:"...."},null,544),p(),bt]),s("div",Dt,[d.DocForm.doc_example?(n(),c("span",{key:0,class:"text-danger x-icon",onClick:t[8]||(t[8]=o=>i.rm_dexp())},vt)):m("",!0),yt,wt,s("img",{src:d.upexp_pre,class:"rounded exp-img cursor-pointer",onClick:t[9]||(t[9]=o=>e.$refs.doc_exp.click())},null,8,kt),s("input",{type:"file",ref:"doc_exp",onChange:t[10]||(t[10]=(...o)=>i.onSelectDocExample&&i.onSelectDocExample(...o)),style:{display:"none"},class:"form-control",placeholder:"...."},null,544)]),s("div",Ct,[d.DocForm.doc_form?(n(),c("span",{key:0,class:"text-danger x-icon",onClick:t[11]||(t[11]=o=>i.rm_dform())},Ft)):m("",!0),St,Gt,s("img",{src:d.upform_pre,class:"rounded exp-img cursor-pointer",onClick:t[12]||(t[12]=o=>e.$refs.doc_form.click())},null,8,jt),s("input",{type:"file",ref:"doc_form",onChange:t[13]||(t[13]=(...o)=>i.onSelectDocForm&&i.onSelectDocForm(...o)),style:{display:"none"},class:"form-control",placeholder:"...."},null,544)])]),s("div",Et,[s("button",{type:"button",class:"btn btn-primary me-2",disabled:i.check_bt,onClick:t[14]||(t[14]=o=>i.SaveDoc())},[e.loading_post?(n(),c("div",Ut,Mt)):(n(),c("span",Vt,"ບັນທຶກ"))],8,It),Lt])])])])])],64)}const Bt=x($s,[["render",Tt],["__scopeId","data-v-91893e4b"]]),Pt={name:"DmsPreDocMg",data(){return{cateid:0}},mounted(){},components:{DocCat:Cs,Doc:Bt},methods:{get_dcid(e){this.cateid=e}}},Rt={class:"row"},Nt={class:"col-md-6"},Kt={class:"col-md-6"};function qt(e,t,r,v,d,i){const o=D("DocCat"),_=D("Doc");return n(),c("div",Rt,[s("div",Nt,[f(o,{onCatid:t[0]||(t[0]=l=>i.get_dcid(l))})]),s("div",Kt,[f(_,{catid:d.cateid},null,8,["catid"])])])}const Jt=x(Pt,[["render",qt]]);export{Jt as default};
