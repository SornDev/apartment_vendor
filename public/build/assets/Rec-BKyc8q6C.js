import{m as E}from"./ulmixins-3GuYya29.js";import{_ as D,u as V,c as r,a as t,w as h,m as v,h as g,j as x,f as a,F as y,r as R,e as u,b as _,t as l,l as k,T as w,g as F,o as n,s as T,x as C,v as S,p as j,q}from"./app-R5zms-zh.js";const B={name:"DmsRec",setup(){return{store:V()}},mixins:[E],data(){return{rec_form:!1,RecData:{data:[]},PrintA4:!0,Status:"",Sort:"desc",RecForm:{rec_id:"",customer_name:"",customer_phone:"",customer_address:"",customer_id:"",status:"",payed:""},RecListForm:[],RecListFormEdit:{rec_name:"",price:"",qty:""},RecListEditID:"",PaySetting:{rec_discount:0,rec_vat:!1,rec_total:0,customer_pay:0,PayBy:"cash"},CustomerData:[],SearchCus:""}},computed:{check_rec_list_form(){return this.RecListFormEdit.rec_name==""||this.RecListFormEdit.qty==""||this.RecListFormEdit.price==""},check_rec_form(){return this.RecListForm.length==0||this.RecForm.customer_id==null||this.RecForm.customer_id==""?!0:!!this.loading_post},TotalSum(){var i=0;return this.RecListForm.forEach(e=>{i+=e.price*e.qty}),i},TotalQty(){var i=0;return this.RecListForm.forEach(e=>{i+=parseInt(e.qty)}),i},CalVat(){let i=0;return this.PaySetting.rec_vat&&(i=(this.TotalSum-this.PaySetting.rec_discount)*JSON.parse(this.store.get_setting).tax_value/100),i},CalTotal(){return this.TotalSum-this.PaySetting.rec_discount+this.CalVat}},mounted(){},methods:{Csearch(){this.SearchCus="",setTimeout(()=>{this.$refs.search_cus.focus()},600)},PtintBill(i,e){e=="80"&&this.openLink(window.location.origin+`/api/rec/print/80mm/${i}`),e=="a4"&&this.openLink(window.location.origin+`/api/rec/print/a4/${i}`),e=="quo"&&this.openLink(window.location.origin+`/api/rec/print/quo/${i}`)},GetCus(){this.GetData(`cus/search?search=${this.SearchCus}`,i=>{this.CustomerData=i})},addCus(i,e,p,m,o,d){this.RecForm.customer_id=i,this.RecForm.customer_name=m=="female"?"ນ "+e+" "+p:e+" "+p,this.RecForm.customer_tel=o,this.RecForm.customer_address=d,this.CustomerData=[]},ChangeSort(){this.Sort=="asc"?this.Sort="desc":this.Sort="asc",this.GetRec()},GetRec(i){this.GetData(`rec/get?page=${i}&perpage=${this.PerPage}&sort=${this.Sort}&search=${this.Search}&status=${this.Status}`,e=>{this.RecData=e})},AddRecList(){this.rec_form=!0,this.RecListEditID="",this.RecListFormEdit={rec_name:"",price:"",qty:1},setTimeout(()=>{this.$refs.list_name.focus()},1e3)},EditRecList(i){this.rec_form=!0,this.RecListEditID=i,this.RecListForm.forEach(e=>{e.id==i&&(this.RecListFormEdit=e)})},SaveRecList(){this.RecListEditID?this.RecListForm.forEach(i=>{i.id==this.RecListEditID&&(i.rec_name=this.RecListFormEdit.rec_name,i.price=this.RecListFormEdit.price,i.qty=this.RecListFormEdit.qty)}):this.RecListForm.push(this.RecListFormEdit),this.rec_form=!1},DeleteRecList(i){this.RecListForm=this.RecListForm.filter(e=>e.id!==i)},CancelRecList(){this.rec_form=!1},AddRec(){this.RecForm={rec_id:"",customer_name:"",customer_phone:"",customer_address:"",customer_id:"",status:""},this.FormType=!0,this.RecListForm=[],this.PaySetting.rec_discount=0,this.PaySetting.customer_pay=0,this.PaySetting.rec_vat=!1,this.AddData("rec/add",{rec_form:this.RecForm,rec_list_form:this.RecListForm,pay_setting:this.PaySetting},i=>{i.success&&this.EditRec(i.bid)},"no")},EditRec(i){this.PrintA4=!0,this.FormType=!1,this.PaySetting.customer_pay=0,this.EditData("rec/edit",i,e=>{this.RecForm=e.rec,this.RecForm.payed=e.payed,this.PaySetting.rec_discount=e.rec.rec_discount,this.PaySetting.rec_vat=!!e.rec.rec_vat,this.RecListForm=e.rec_list;var p=new bootstrap.Modal(document.getElementById("rec_form"),{keyboard:!1});p.show()})},SaveRec(){this.FormType?this.AddData("rec/add",{rec_form:this.RecForm,rec_list_form:this.RecListForm,pay_setting:this.PaySetting},i=>{i.success&&(this.GetRec(),this.$refs.close_rec_form.click())}):this.UpdateData(`rec/update/${this.EditID}`,{rec_form:this.RecForm,rec_list_form:this.RecListForm,pay_setting:this.PaySetting},i=>{i.success&&(this.GetRec(),this.$refs.close_rec_form.click(),this.PrintA4&&this.PtintBill(this.RecForm.rec_id,JSON.parse(this.store.get_setting).printer_default))})},DelRec(i){this.DeleteData("rec/delete",i,e=>{this.GetRec()},"ທີ່ທ່ານຕ້ອງຍົກເລີກລາຍການນີ້?")}},created(){this.GetRec()},watch:{Search:function(i){i==""&&this.GetRec()}}},c=i=>(j("data-v-5bdbface"),i=i(),q(),i),A={class:"card"},G=c(()=>t("h5",{class:"card-header"},"ລາຍການໃບບິນ",-1)),I={class:"card-body"},U={class:"table-responsive text-nowrap"},N={class:"d-flex justify-content-between mb-2"},J={class:"d-flex justify-content-between align-items-center"},O={key:0,class:"bx bx-sort-up fs-4 me-2"},M={key:1,class:"bx bx-sort-down fs-4 me-2"},K=c(()=>t("option",{value:"10"},"10",-1)),Q=c(()=>t("option",{value:"20"},"20",-1)),z=c(()=>t("option",{value:"30"},"30",-1)),H=[K,Q,z],W=c(()=>t("option",{value:""},"ສະຖານະ",-1)),X=c(()=>t("option",{value:"padding"},"ກຳລັງດຳເນີນການ",-1)),Y=c(()=>t("option",{value:"success"},"ສຳເລັດ",-1)),Z=c(()=>t("option",{value:"reject"},"ຍົກເລີກ",-1)),$=[W,X,Y,Z],tt={class:"d-flex"},et={class:"table table-bordered"},st=c(()=>t("thead",null,[t("tr",{class:"table-info"},[t("th",{class:"fs-6 fw-bold"},"ເລກທີ່"),t("th",{class:"fs-6 fw-bold"},"ວັນທີ່"),t("th",{class:"fs-6 fw-bold"},"ລູກຄ້າ"),t("th",{class:"fs-6 fw-bold text-center"},"ລາຄາ"),t("th",{class:"fs-6 fw-bold"},"ສະຖານະ"),t("th",{class:"fs-6 fw-bold"},"ຜູ້ບັນທຶກ"),t("th",{class:"fs-6 fw-bold"},"ຈັດການ")])],-1)),ot={key:0},it={class:"text-end"},ct={key:0,class:"badge bg-label-success me-1"},nt={key:1,class:"badge bg-label-danger me-1"},rt={key:2,class:"badge bg-label-warning me-1"},dt={class:"text-center"},lt={class:"dropdown"},at=c(()=>t("button",{type:"button",class:"btn p-0 dropdown-toggle hide-arrow","data-bs-toggle":"dropdown"},[t("i",{class:"bx bx-dots-vertical-rounded"})],-1)),_t={class:"dropdown-menu"},mt=["onClick"],ht=c(()=>t("i",{class:"bx bx-printer me-1"},null,-1)),ut=["onClick"],pt=c(()=>t("i",{class:"bx bx-edit-alt me-1"},null,-1)),ft=["onClick"],bt=c(()=>t("i",{class:"bx bx-trash me-1"},null,-1)),yt={key:1},gt=c(()=>t("tr",null,[t("td",{colspan:"7",class:"text-center"},[t("i",{class:"bx bxs-data me-1"}),_(" ບໍ່ມີຂໍ້ມູນ ")])],-1)),Rt=[gt],vt={class:"modal modal-top modal-lg fade",id:"rec_form",tabindex:"-1",style:{display:"none"},"data-bs-backdrop":"static","aria-hidden":"true"},xt={class:"modal-dialog"},kt={class:"modal-content"},wt={class:"modal-header"},Ft={type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",ref:"close_rec_form"},Ct={class:"modal-body pt-0"},St={class:"row mb-3"},Pt={class:"col-md-6 fs-5 fw-bold"},Lt={class:"text-danger"},Et={class:"col-md-6 text-end"},Dt=c(()=>t("i",{class:"bx bxs-printer"},null,-1)),Vt=c(()=>t("i",{class:"bx bxs-printer"},null,-1)),Tt=c(()=>t("i",{class:"bx bxs-printer"},null,-1)),jt={key:0,class:"outer"},qt={class:"row mb-2"},Bt={class:"col-md-12"},At=c(()=>t("label",{for:"list-name",class:"form-label fs-6"},"ຊື່ລາຍການ",-1)),Gt={class:"row mb-2"},It={class:"col-md-2"},Ut=c(()=>t("label",{for:"list-qty",class:"form-label fs-6"},"ຈຳນວນ",-1)),Nt={class:"col-md-3"},Jt=c(()=>t("label",{for:"list-price",class:"form-label fs-6"},"ລາຄາ",-1)),Ot={class:"input-group"},Mt=c(()=>t("span",{class:"input-group-text"},"₭",-1)),Kt={class:"d-flex justify-content-end mt-4"},Qt=["disabled"],zt={key:0},Ht={key:1,class:"spinner-border text-warning",role:"status"},Wt=c(()=>t("span",{class:"visually-hidden"},"Loading...",-1)),Xt=[Wt],Yt={key:0,class:"outer"},Zt={class:"row mb-2"},$t={class:"col-md-6 d-flex justify-content-between"},te={key:0},ee=c(()=>t("br",null,null,-1)),se={key:1},oe={class:"btn-group"},ie=c(()=>t("i",{class:"bx bx-search"},null,-1)),ce=[ie],ne={class:"dropdown-menu",style:{width:"max-content"}},re={class:"p-2"},de=["onClick"],le={key:0},ae=c(()=>t("i",{class:"bx bxs-left-top-arrow-circle ms-2"},null,-1)),_e={class:"col-md-6 text-end"},me=c(()=>t("i",{class:"bx bx-plus fs-5"},null,-1)),he=[me],ue={class:"table-responsive text-nowrap"},pe={class:"text-end"},fe={class:"me-4 fs-6"},be={key:0,class:"text-success"},ye=c(()=>t("i",{class:"bx bxs-check-shield fs-4"},null,-1)),ge={key:1,class:"text-danger"},Re=c(()=>t("i",{class:"bx bxs-shield-x fs-4"},null,-1)),ve={class:"table table-bordered align-middle table-nowrap mb-0"},xe={class:"table-light"},ke=c(()=>t("th",{scope:"col",width:"50",class:"text-center fs-6"}," ລຳດັບ ",-1)),we=c(()=>t("th",{scope:"col",class:"fs-6"},"ເນື້ອໃນລາຍການ",-1)),Fe=c(()=>t("th",{scope:"col",width:"110",class:"text-center fs-6"}," ລາຄາ ",-1)),Ce=c(()=>t("th",{scope:"col",width:"100",class:"text-center fs-6"}," ຈຳນວນ ",-1)),Se=c(()=>t("th",{scope:"col",width:"150",class:"text-end fs-6"},"ລວມ",-1)),Pe={key:0,scope:"col",class:"fs-6 text-center",width:"88"},Le={class:"text-center"},Ee={class:"text-end"},De={class:"text-center"},Ve={class:"text-end"},Te={key:0,class:"text-center"},je={class:"dropdown"},qe=c(()=>t("button",{type:"button",class:"btn p-0 dropdown-toggle hide-arrow","data-bs-toggle":"dropdown"},[t("i",{class:"bx bx-dots-vertical-rounded"})],-1)),Be={class:"dropdown-menu"},Ae=["onClick"],Ge=c(()=>t("i",{class:"bx bx-edit-alt me-1"},null,-1)),Ie=["onClick"],Ue=c(()=>t("i",{class:"bx bx-trash me-1"},null,-1)),Ne=c(()=>t("td",{colspan:"3",class:"text-end fs-6"},"ລວມທັງໝົດ",-1)),Je={class:"text-center"},Oe={class:"text-end"},Me={key:0},Ke=c(()=>t("td",{colspan:"4",class:"text-end fs-6"},[_(" ສ່ວນຫຼຸດ "),t("i",{class:"mdi mdi-archive-edit align-middle fs-6 text-danger"})],-1)),Qe={class:"text-end d-flex align-items-center justify-content-end"},ze={key:0},He={key:2,class:"fs-6",style:{"padding-top":"2px"}},We={key:0},Xe={colspan:"4",class:"text-end"},Ye={class:"d-flex justify-content-end fs-6"},Ze={key:0,class:"form-check form-switch ms-2"},$e={class:"text-end"},ts={key:0},es={key:0,style:{position:"relative"}},ss={style:{position:"absolute"}},os={class:"row"},is={class:"col md-12"},cs={class:"card border-dashed border-2 border-warning mt-3"},ns={class:"card-body p-3"},rs={class:"d-flex justify-content-between mt-2"},ds={class:"me-4"},ls={class:"form-check"},as=c(()=>t("label",{class:"form-check-label",for:"formCheck1"}," ຊຳລ່ະດ້ວຍ ເງິນສົດ ",-1)),_s={class:"form-check"},ms=c(()=>t("label",{class:"form-check-label",for:"formCheck2"}," ຊຳລ່ະດ້ວຍ ເງິນໂອນ ",-1)),hs={key:1,class:"table align-middle table-nowrap mb-0"},us={key:0},ps=c(()=>t("td",{class:"text-end pe-2 fw-bold"},"ລວມທັງໝົດ:",-1)),fs={style:{width:"238px"},class:"border px-3 py-2 text-end fs-5 fw-bold"},bs={key:1},ys=c(()=>t("td",{class:"text-end pe-2 fw-bold"},"ຈ່າຍແລ້ວ:",-1)),gs={style:{width:"238px"},class:"border px-3 py-2 text-end fs-5 fw-bold"},Rs=c(()=>t("td",{class:"text-end pe-2 fw-bold"},"ລວມເງິນຕ້ອງຈ່າຍ:",-1)),vs={style:{width:"238px"},class:"border px-3 py-2 text-end fs-5 fw-bold"},xs=c(()=>t("td",{class:"text-end pe-2 fw-bold text-info"}," ຮັບເງິນນຳລູກຄ້າ: ",-1)),ks={style:{width:"238px"},class:"border px-3 py-2 text-end fs-5 fw-bold d-flex align-items-center"},ws=c(()=>t("span",{class:"fs-6 p-0 text-info",style:{"padding-top":"6px"}},"₭",-1)),Fs={key:2},Cs=c(()=>t("td",{class:"text-end pe-2 fw-bold text-danger"},"ເງິນທອນ:",-1)),Ss={style:{width:"238px"},class:"border text-danger px-3 py-2 text-end fs-5 fw-bold"},Ps={key:2,class:"table align-middle table-nowrap mb-0"},Ls={key:0},Es=c(()=>t("td",{class:"text-end pe-2 fw-bold"},"ລວມທັງໝົດ:",-1)),Ds={style:{width:"238px"},class:"border px-3 py-2 text-end fs-5 fw-bold"},Vs={class:"d-flex justify-content-end mt-4 align-items-center"},Ts={class:"form-check me-4"},js=c(()=>t("label",{class:"form-check-label",for:"prnt-4a"}," ພິມບິນພ້ອມ ",-1)),qs=["disabled"],Bs={key:0},As={key:1,class:"spinner-border text-warning",role:"status"},Gs=c(()=>t("span",{class:"visually-hidden"},"Loading...",-1)),Is=[Gs],Us=c(()=>t("button",{type:"button",class:"btn btn-label-secondary","data-bs-dismiss":"modal"}," ຍົກເລີກ ",-1));function Ns(i,e,p,m,o,d){const P=F("pagination"),b=F("cleave");return n(),r(y,null,[t("div",A,[G,t("div",I,[t("div",U,[t("div",N,[t("div",J,[t("div",{class:"cursor-pointer",onClick:e[0]||(e[0]=s=>d.ChangeSort())},[o.Sort=="asc"?(n(),r("i",O)):(n(),r("i",M))]),h(t("select",{class:"form-select me-2","onUpdate:modelValue":e[1]||(e[1]=s=>i.PerPage=s),onChange:e[2]||(e[2]=s=>d.GetRec())},H,544),[[v,i.PerPage]]),h(t("select",{class:"form-select me-2","onUpdate:modelValue":e[3]||(e[3]=s=>o.Status=s),onChange:e[4]||(e[4]=s=>d.GetRec())},$,544),[[v,o.Status]])]),t("div",tt,[h(t("input",{type:"text",class:"form-control me-2","onUpdate:modelValue":e[5]||(e[5]=s=>i.Search=s),onKeyup:e[6]||(e[6]=x(s=>d.GetRec(),["enter"])),placeholder:"ຄົ້ນຫາ..."},null,544),[[g,i.Search]]),m.store.get_permissions.includes("REC_ACC_EDIT")||JSON.parse(m.store.get_user).user_type=="admin"?(n(),r("button",{key:0,class:"btn btn-primary",onClick:e[7]||(e[7]=s=>d.AddRec())},"ເພີ່ມໃໝ່")):a("",!0)])]),t("table",et,[st,o.RecData.data.length>0?(n(),r("tbody",ot,[(n(!0),r(y,null,R(o.RecData.data,s=>(n(),r("tr",{key:s.id},[t("td",null,l(s.rec_id),1),t("td",null,l(i.date(s.created_at)),1),t("td",null,l(s.customer_name),1),t("td",it,l(i.formatPrice(s.total_price))+" ກີບ",1),t("td",null,[s.status=="success"?(n(),r("span",ct,"ຊຳລ່ະແລ້ວ")):a("",!0),s.status=="reject"?(n(),r("span",nt,"ຍົກເລີກ")):a("",!0),s.status=="padding"?(n(),r("span",rt,"ດຳເນີນການ")):a("",!0)]),t("td",null,l(s.user_name),1),t("td",dt,[t("div",lt,[at,t("div",_t,[t("a",{class:"dropdown-item",href:"javascript:void(0);",onClick:f=>d.PtintBill(s.rec_id,JSON.parse(m.store.get_setting).printer_default)},[ht,_(" ປຼິນ")],8,mt),m.store.get_permissions.includes("REC_ACC_EDIT")||JSON.parse(m.store.get_user).user_type=="admin"?(n(),r("a",{key:0,class:"dropdown-item",href:"javascript:void(0);",onClick:f=>d.EditRec(s.id)},[pt,_(" ແກ້ໄຂ")],8,ut)):a("",!0),m.store.get_permissions.includes("REC_ACC_DEL")||JSON.parse(m.store.get_user).user_type=="admin"?(n(),r("a",{key:1,class:"dropdown-item",href:"javascript:void(0);",onClick:f=>d.DelRec(s.id)},[bt,_(" ຍົກເລີກ")],8,ft)):a("",!0)])])])]))),128))])):(n(),r("tbody",yt,Rt))]),u(P,{pagination:o.RecData,onPaginate:e[8]||(e[8]=s=>d.GetRec(s)),offset:4},null,8,["pagination"])])])]),t("div",vt,[t("div",xt,[t("div",kt,[t("div",wt,[t("button",Ft,null,512)]),t("div",Ct,[t("div",St,[t("div",Pt,[t("span",null,[_("ໃບບິນເລກທີ່: "),t("span",Lt,l(o.RecForm.rec_id),1)])]),t("div",Et,[t("button",{type:"button",class:"btn btn-warning me-2",onClick:e[9]||(e[9]=s=>d.PtintBill(o.RecForm.rec_id,"quo"))},[Dt,_(" ສະເໜີລາຄາ ")]),t("button",{type:"button",class:"btn btn-warning me-2",onClick:e[10]||(e[10]=s=>d.PtintBill(o.RecForm.rec_id,"80"))},[Vt,_(" 80mm ")]),t("button",{type:"button",class:"btn btn-warning",onClick:e[11]||(e[11]=s=>d.PtintBill(o.RecForm.rec_id,"a4"))},[Tt,_(" A4 ")])])]),u(w,{name:"slide-fade"},{default:k(()=>[o.rec_form?(n(),r("div",jt,[t("div",qt,[t("div",Bt,[At,h(t("input",{type:"text",class:"form-control",id:"list-name",ref:"list_name","onUpdate:modelValue":e[12]||(e[12]=s=>o.RecListFormEdit.rec_name=s)},null,512),[[g,o.RecListFormEdit.rec_name]])])]),t("div",Gt,[t("div",It,[Ut,u(b,{options:i.options,class:"form-control",id:"list-qty",modelValue:o.RecListFormEdit.qty,"onUpdate:modelValue":e[13]||(e[13]=s=>o.RecListFormEdit.qty=s)},null,8,["options","modelValue"])]),t("div",Nt,[Jt,t("div",Ot,[u(b,{options:i.options,class:"form-control text-end",id:"list-price",modelValue:o.RecListFormEdit.price,"onUpdate:modelValue":e[14]||(e[14]=s=>o.RecListFormEdit.price=s)},null,8,["options","modelValue"]),Mt])])]),t("div",Kt,[t("button",{type:"button",class:"btn btn-primary me-2",disabled:d.check_rec_list_form,onClick:e[15]||(e[15]=s=>d.SaveRecList())},[i.loading_post?(n(),r("div",Ht,Xt)):(n(),r("span",zt,"ບັນທຶກ"))],8,Qt),t("button",{type:"button",class:"btn btn-label-secondary",onClick:e[16]||(e[16]=(...s)=>d.CancelRecList&&d.CancelRecList(...s))}," ຍົກເລີກ ")])])):a("",!0)]),_:1}),u(w,{name:"slide-fade"},{default:k(()=>[o.rec_form?a("",!0):(n(),r("div",Yt,[t("div",Zt,[t("div",$t,[o.RecForm.customer_id?(n(),r("div",te,[t("span",null,"ລູກຄ້າ: "+l(o.RecForm.customer_name)+" ("+l(o.RecForm.customer_tel)+")",1),ee,t("span",null,"ທີ່ຢູ່: "+l(o.RecForm.customer_address),1)])):(n(),r("div",se,"ລູກຄ້າ: ບຸກຄົນທົ່ວໄປ")),t("div",oe,[t("button",{type:"button",class:"btn btn-icon rounded-pill btn-primary","data-bs-toggle":"dropdown","aria-expanded":"false",onClick:e[17]||(e[17]=s=>d.Csearch())},ce),t("div",ne,[t("div",re,[h(t("input",{type:"text",class:"form-control rounded-pill",placeholder:"ຄົ້ນຫາລູກຄ້າ...","onUpdate:modelValue":e[18]||(e[18]=s=>o.SearchCus=s),onKeyup:e[19]||(e[19]=x(s=>d.GetCus(),["enter"])),ref:"search_cus"},null,544),[[g,o.SearchCus]])]),(n(!0),r(y,null,R(o.CustomerData,s=>(n(),r("a",{key:s.id,onClick:f=>d.addCus(s.id,s.name,s.last_name,s.gender,s.tel,s.address),class:"dropdown-item align-middle d-flex align-items-center justify-content-between cursor-pointer"},[t("span",null,[s.gender=="female"?(n(),r("span",le,"ນ")):a("",!0),_(" "+l(s.name)+" "+l(s.last_name),1)]),ae],8,de))),128))])])]),t("div",_e,[o.RecForm.status=="padding"||o.RecForm.status=="created"?(n(),r("button",{key:0,type:"button",class:"btn rounded-pill btn-icon btn-info me-2",onClick:e[20]||(e[20]=s=>d.AddRecList())},he)):a("",!0)])]),t("div",ue,[t("div",pe,[t("span",fe,[_("ການຊຳລ່ະ: "),o.RecForm.status=="success"?(n(),r("span",be,[ye,_(" ຊຳລ່ະແລ້ວ ")])):(n(),r("span",ge,[Re,_(" ຍັງບໍ່ຊຳລ່ະ")]))])]),t("table",ve,[t("thead",xe,[t("tr",null,[ke,we,Fe,Ce,Se,o.RecForm.status=="padding"||o.RecForm.status=="created"?(n(),r("th",Pe," ຈັດການ ")):a("",!0)])]),t("tbody",null,[(n(!0),r(y,null,R(o.RecListForm,(s,f)=>(n(),r("tr",{key:s.id},[t("td",Le,l(f+1),1),t("td",null,l(s.rec_name),1),t("td",Ee,l(i.formatPrice(s.price)),1),t("td",De,l(i.formatPrice(s.qty)),1),t("td",Ve,l(i.formatPrice(s.price*s.qty)),1),o.RecForm.status=="padding"||o.RecForm.status=="created"?(n(),r("td",Te,[t("div",je,[qe,t("div",Be,[t("a",{class:"dropdown-item",href:"javascript:void(0);",onClick:L=>d.EditRecList(s.id)},[Ge,_(" ແກ້ໄຂ")],8,Ae),t("a",{class:"dropdown-item",href:"javascript:void(0);",onClick:L=>d.DeleteRecList(s.id)},[Ue,_(" ລຶບ")],8,Ie)])])])):a("",!0)]))),128)),t("tr",null,[Ne,t("td",Je,l(i.formatPrice(d.TotalQty)),1),t("td",Oe,l(i.formatPrice(d.TotalSum)),1),o.RecForm.status=="padding"||o.RecForm.status=="created"?(n(),r("td",Me)):a("",!0)]),t("tr",null,[Ke,t("td",Qe,[o.RecForm.status=="success"?(n(),r("span",ze,l(i.formatPrice(o.PaySetting.rec_discount))+" ₭",1)):a("",!0),o.RecForm.status=="padding"||o.RecForm.status=="created"?(n(),T(b,{key:1,type:"text",class:"form-control p-1 fs-6 border-danger text-end border-1 me-1",options:i.options,modelValue:o.PaySetting.rec_discount,"onUpdate:modelValue":e[21]||(e[21]=s=>o.PaySetting.rec_discount=s)},null,8,["options","modelValue"])):a("",!0),o.RecForm.status=="padding"||o.RecForm.status=="created"?(n(),r("span",He,"₭")):a("",!0)]),o.RecForm.status=="padding"||o.RecForm.status=="created"?(n(),r("td",We)):a("",!0)]),t("tr",null,[t("td",Xe,[t("div",Ye,[_(" ອມພ("+l(JSON.parse(m.store.get_setting).tax_value)+"%) ",1),o.RecForm.status=="padding"||o.RecForm.status=="created"?(n(),r("div",Ze,[h(t("input",{class:"form-check-input",type:"checkbox",role:"switch",checked:!1,"onUpdate:modelValue":e[22]||(e[22]=s=>o.PaySetting.rec_vat=s)},null,512),[[C,o.PaySetting.rec_vat]])])):a("",!0)])]),t("td",$e,l(i.formatPrice(d.CalVat))+" ₭",1),o.RecForm.status=="padding"||o.RecForm.status=="created"?(n(),r("td",ts)):a("",!0)])])]),o.RecForm.payed>=d.CalTotal?a("",!0):(n(),r("div",es,[t("div",ss,[t("div",os,[t("div",is,[t("div",cs,[t("div",ns,[t("div",rs,[t("span",ds,[t("div",ls,[h(t("input",{class:"form-check-input",type:"radio",id:"formCheck1",name:"payby",value:"cash","onUpdate:modelValue":e[23]||(e[23]=s=>o.PaySetting.PayBy=s)},null,512),[[S,o.PaySetting.PayBy]]),as])]),t("span",null,[t("div",_s,[h(t("input",{class:"form-check-input",type:"radio",name:"payby",id:"formCheck2",value:"bank","onUpdate:modelValue":e[24]||(e[24]=s=>o.PaySetting.PayBy=s)},null,512),[[S,o.PaySetting.PayBy]]),ms])])])])])])])])])),o.RecForm.payed>=d.CalTotal?(n(),r("table",Ps,[o.RecForm.payed?(n(),r("tr",Ls,[Es,t("td",Ds,l(i.formatPrice(d.CalTotal))+" ₭ ",1)])):a("",!0)])):(n(),r("table",hs,[o.RecForm.payed?(n(),r("tr",us,[ps,t("td",fs,l(i.formatPrice(d.CalTotal))+" ₭ ",1)])):a("",!0),o.RecForm.payed?(n(),r("tr",bs,[ys,t("td",gs,l(i.formatPrice(o.RecForm.payed))+" ₭ ",1)])):a("",!0),t("tr",null,[Rs,t("td",vs,l(i.formatPrice(d.CalTotal-o.RecForm.payed))+" ₭ ",1)]),t("tr",null,[xs,t("td",ks,[u(b,{type:"text",class:"form-control text-info p-1 fs-5 fw-bold border-danger text-end border-1 me-1",options:i.options,modelValue:o.PaySetting.customer_pay,"onUpdate:modelValue":e[25]||(e[25]=s=>o.PaySetting.customer_pay=s)},null,8,["options","modelValue"]),ws])]),o.PaySetting.customer_pay-(d.CalTotal-o.RecForm.payed)>0?(n(),r("tr",Fs,[Cs,t("td",Ss,l(i.formatPrice(o.PaySetting.customer_pay-(d.CalTotal-o.RecForm.payed)))+" ₭ ",1)])):a("",!0)]))]),t("div",Vs,[t("div",Ts,[h(t("input",{class:"form-check-input",type:"checkbox",id:"prnt-4a","onUpdate:modelValue":e[26]||(e[26]=s=>o.PrintA4=s)},null,512),[[C,o.PrintA4]]),js]),t("button",{type:"button",class:"btn btn-primary me-2",disabled:d.check_rec_form,onClick:e[27]||(e[27]=s=>d.SaveRec())},[i.loading_post?(n(),r("div",As,Is)):(n(),r("span",Bs,"ບັນທຶກ"))],8,qs),Us])]))]),_:1})])])])])],64)}const Ms=D(B,[["render",Ns],["__scopeId","data-v-5bdbface"]]);export{Ms as default};
