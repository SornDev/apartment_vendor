import{_ as E,u as D,m as V,r as R,o as c,c as d,b as t,d as a,w as h,g as x,v as g,l as k,F as y,h as v,e as u,i as _,t as l,f as w,T as F,x as T,y as C,n as S,p as j,j as q}from"./app-_hB8Ak0D.js";const B={name:"DmsRec",setup(){return{store:D()}},mixins:[V],data(){return{rec_form:!1,RecData:{data:[]},PrintA4:!0,Status:"",Sort:"desc",RecForm:{rec_id:"",customer_name:"",customer_phone:"",customer_address:"",customer_id:"",status:"",payed:""},RecListForm:[],RecListFormEdit:{rec_name:"",price:"",qty:""},RecListEditID:"",PaySetting:{rec_discount:0,rec_vat:!1,rec_total:0,customer_pay:0,PayBy:"cash"},CustomerData:[],SearchCus:""}},computed:{check_rec_list_form(){return this.RecListFormEdit.rec_name==""||this.RecListFormEdit.qty==""||this.RecListFormEdit.price==""},check_rec_form(){return this.RecListForm.length==0||this.RecForm.customer_id==null||this.RecForm.customer_id==""?!0:!!this.loading_post},TotalSum(){var o=0;return this.RecListForm.forEach(e=>{o+=e.price*e.qty}),o},TotalQty(){var o=0;return this.RecListForm.forEach(e=>{o+=parseInt(e.qty)}),o},CalVat(){let o=0;return this.PaySetting.rec_vat&&(o=(this.TotalSum-this.PaySetting.rec_discount)*JSON.parse(this.store.get_setting).tax_value/100),o},CalTotal(){return this.TotalSum-this.PaySetting.rec_discount+this.CalVat}},mounted(){},methods:{Csearch(){this.SearchCus="",setTimeout(()=>{this.$refs.search_cus.focus()},600)},PtintBill(o,e){e=="80"&&this.openLink(window.location.origin+`/api/rec/print/80mm/${o}`),e=="a4"&&this.openLink(window.location.origin+`/api/rec/print/a4/${o}`),e=="quo"&&this.openLink(window.location.origin+`/api/rec/print/quo/${o}`)},GetCus(){this.GetData(`cus/search?search=${this.SearchCus}`,o=>{this.CustomerData=o})},addCus(o,e,p,m,i,r){this.RecForm.customer_id=o,this.RecForm.customer_name=m=="female"?"ນ "+e+" "+p:e+" "+p,this.RecForm.customer_tel=i,this.RecForm.customer_address=r,this.CustomerData=[]},ChangeSort(){this.Sort=="asc"?this.Sort="desc":this.Sort="asc",this.GetRec()},GetRec(o){this.GetData(`rec/get?page=${o}&perpage=${this.PerPage}&sort=${this.Sort}&search=${this.Search}&status=${this.Status}`,e=>{this.RecData=e})},AddRecList(){this.rec_form=!0,this.RecListEditID="",this.RecListFormEdit={rec_name:"",price:"",qty:1},setTimeout(()=>{this.$refs.list_name.focus()},1e3)},EditRecList(o){this.rec_form=!0,this.RecListEditID=o,this.RecListForm.forEach(e=>{e.id==o&&(this.RecListFormEdit=e)})},SaveRecList(){this.RecListEditID?this.RecListForm.forEach(o=>{o.id==this.RecListEditID&&(o.rec_name=this.RecListFormEdit.rec_name,o.price=this.RecListFormEdit.price,o.qty=this.RecListFormEdit.qty)}):this.RecListForm.push(this.RecListFormEdit),this.rec_form=!1},DeleteRecList(o){this.RecListForm=this.RecListForm.filter(e=>e.id!==o)},CancelRecList(){this.rec_form=!1},AddRec(){this.RecForm={rec_id:"",customer_name:"",customer_phone:"",customer_address:"",customer_id:"",status:""},this.FormType=!0,this.RecListForm=[],this.PaySetting.rec_discount=0,this.PaySetting.customer_pay=0,this.PaySetting.rec_vat=!1,this.AddData("rec/add",{rec_form:this.RecForm,rec_list_form:this.RecListForm,pay_setting:this.PaySetting},o=>{o.success&&this.EditRec(o.bid)},"no")},EditRec(o){this.PrintA4=!0,this.FormType=!1,this.PaySetting.customer_pay=0,this.EditData("rec/edit",o,e=>{this.RecForm=e.rec,this.RecForm.payed=e.payed,this.PaySetting.rec_discount=e.rec.rec_discount,this.PaySetting.rec_vat=e.rec.rec_vat==1,this.RecListForm=e.rec_list;var p=new bootstrap.Modal(document.getElementById("rec_form"),{keyboard:!1});p.show()})},SaveRec(){this.FormType?this.AddData("rec/add",{rec_form:this.RecForm,rec_list_form:this.RecListForm,pay_setting:this.PaySetting},o=>{o.success&&(this.GetRec(),this.$refs.close_rec_form.click())}):(this.PaySetting.rec_vat==!0?this.PaySetting.rec_vat=1:this.PaySetting.rec_vat=0,this.UpdateData(`rec/update/${this.EditID}`,{rec_form:this.RecForm,rec_list_form:this.RecListForm,pay_setting:this.PaySetting},o=>{o.success&&(this.GetRec(),this.$refs.close_rec_form.click(),this.PrintA4&&this.PtintBill(this.RecForm.rec_id,JSON.parse(this.store.get_setting).printer_default))}))},DelRec(o){this.DeleteData("rec/delete",o,e=>{this.GetRec()},"ທີ່ທ່ານຕ້ອງຍົກເລີກລາຍການນີ້?")}},created(){this.GetRec()},watch:{Search:function(o){o==""&&this.GetRec()}}},n=o=>(j("data-v-7bdb4b65"),o=o(),q(),o),A={class:"card"},G={class:"card-header d-flex"},I=n(()=>t("h5",{class:"mb-0"},"ລາຍການໃບບິນ",-1)),U={key:0,class:"spinner-grow spinner-grow-sm text-warning ms-2",role:"status"},N=n(()=>t("span",{class:"visually-hidden"},"Loading...",-1)),J=[N],O={class:"card-body"},M={class:"table-responsive text-nowrap"},K={class:"d-flex justify-content-between mb-2"},Q={class:"d-flex justify-content-between align-items-center"},z={key:0,class:"bx bx-sort-up fs-4 me-2"},H={key:1,class:"bx bx-sort-down fs-4 me-2"},W=n(()=>t("option",{value:"10"},"10",-1)),X=n(()=>t("option",{value:"20"},"20",-1)),Y=n(()=>t("option",{value:"30"},"30",-1)),Z=[W,X,Y],$=n(()=>t("option",{value:""},"ສະຖານະ",-1)),tt=n(()=>t("option",{value:"padding"},"ກຳລັງດຳເນີນການ",-1)),et=n(()=>t("option",{value:"success"},"ສຳເລັດ",-1)),st=n(()=>t("option",{value:"reject"},"ຍົກເລີກ",-1)),ot=[$,tt,et,st],it={class:"d-flex"},nt={class:"table table-bordered"},ct=n(()=>t("thead",null,[t("tr",{class:"table-info"},[t("th",{class:"fs-6 fw-bold"},"ເລກທີ່"),t("th",{class:"fs-6 fw-bold"},"ວັນທີ່"),t("th",{class:"fs-6 fw-bold"},"ລູກຄ້າ"),t("th",{class:"fs-6 fw-bold text-center"},"ລາຄາ"),t("th",{class:"fs-6 fw-bold"},"ສະຖານະ"),t("th",{class:"fs-6 fw-bold"},"ຜູ້ບັນທຶກ"),t("th",{class:"fs-6 fw-bold"},"ຈັດການ")])],-1)),dt={key:0},rt={class:"text-end"},lt={key:0,class:"badge bg-label-success me-1"},at={key:1,class:"badge bg-label-danger me-1"},_t={key:2,class:"badge bg-label-warning me-1"},mt={class:"text-center"},ht={class:"dropdown"},ut=n(()=>t("button",{type:"button",class:"btn p-0 dropdown-toggle hide-arrow","data-bs-toggle":"dropdown"},[t("i",{class:"bx bx-dots-vertical-rounded"})],-1)),pt={class:"dropdown-menu"},ft=["onClick"],bt=n(()=>t("i",{class:"bx bx-printer me-1"},null,-1)),yt=["onClick"],gt=n(()=>t("i",{class:"bx bx-edit-alt me-1"},null,-1)),vt=["onClick"],Rt=n(()=>t("i",{class:"bx bx-trash me-1"},null,-1)),xt={key:1},kt=n(()=>t("tr",null,[t("td",{colspan:"7",class:"text-center"},[t("i",{class:"bx bxs-data me-1"}),_(" ບໍ່ມີຂໍ້ມູນ ")])],-1)),wt=[kt],Ft={class:"modal modal-top modal-lg fade",id:"rec_form",tabindex:"-1",style:{display:"none"},"data-bs-backdrop":"static","aria-hidden":"true"},Ct={class:"modal-dialog"},St={class:"modal-content"},Pt={class:"modal-header"},Lt={type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",ref:"close_rec_form"},Et={class:"modal-body pt-0"},Dt={class:"row mb-3"},Vt={class:"col-md-6 fs-5 fw-bold"},Tt={class:"text-danger"},jt={class:"col-md-6 text-end"},qt=n(()=>t("i",{class:"bx bxs-printer"},null,-1)),Bt=n(()=>t("i",{class:"bx bxs-printer"},null,-1)),At=n(()=>t("i",{class:"bx bxs-printer"},null,-1)),Gt={key:0,class:"outer"},It={class:"row mb-2"},Ut={class:"col-md-12"},Nt=n(()=>t("label",{for:"list-name",class:"form-label fs-6"},"ຊື່ລາຍການ",-1)),Jt={class:"row mb-2"},Ot={class:"col-md-2"},Mt=n(()=>t("label",{for:"list-qty",class:"form-label fs-6"},"ຈຳນວນ",-1)),Kt={class:"col-md-3"},Qt=n(()=>t("label",{for:"list-price",class:"form-label fs-6"},"ລາຄາ",-1)),zt={class:"input-group"},Ht=n(()=>t("span",{class:"input-group-text"},"₭",-1)),Wt={class:"d-flex justify-content-end mt-4"},Xt=["disabled"],Yt={key:0},Zt={key:1,class:"spinner-border text-warning",role:"status"},$t=n(()=>t("span",{class:"visually-hidden"},"Loading...",-1)),te=[$t],ee={key:0,class:"outer"},se={class:"row mb-2"},oe={class:"col-md-6 d-flex justify-content-between"},ie={key:0},ne=n(()=>t("br",null,null,-1)),ce={key:1},de={class:"btn-group"},re=n(()=>t("i",{class:"bx bx-search"},null,-1)),le=[re],ae={class:"dropdown-menu",style:{width:"max-content"}},_e={class:"p-2"},me=["onClick"],he={key:0},ue=n(()=>t("i",{class:"bx bxs-left-top-arrow-circle ms-2"},null,-1)),pe={class:"col-md-6 text-end"},fe=n(()=>t("i",{class:"bx bx-plus fs-5"},null,-1)),be=[fe],ye={class:"table-responsive text-nowrap"},ge={class:"text-end"},ve={class:"me-4 fs-6"},Re={key:0,class:"text-success"},xe=n(()=>t("i",{class:"bx bxs-check-shield fs-4"},null,-1)),ke={key:1,class:"text-danger"},we=n(()=>t("i",{class:"bx bxs-shield-x fs-4"},null,-1)),Fe={class:"table table-bordered align-middle table-nowrap mb-0"},Ce={class:"table-light"},Se=n(()=>t("th",{scope:"col",width:"50",class:"text-center fs-6"}," ລຳດັບ ",-1)),Pe=n(()=>t("th",{scope:"col",class:"fs-6"},"ເນື້ອໃນລາຍການ",-1)),Le=n(()=>t("th",{scope:"col",width:"110",class:"text-center fs-6"}," ລາຄາ ",-1)),Ee=n(()=>t("th",{scope:"col",width:"100",class:"text-center fs-6"}," ຈຳນວນ ",-1)),De=n(()=>t("th",{scope:"col",width:"150",class:"text-end fs-6"},"ລວມ",-1)),Ve={key:0,scope:"col",class:"fs-6 text-center",width:"88"},Te={class:"text-center"},je={class:"text-end"},qe={class:"text-center"},Be={class:"text-end"},Ae={key:0,class:"text-center"},Ge={class:"dropdown"},Ie=n(()=>t("button",{type:"button",class:"btn p-0 dropdown-toggle hide-arrow","data-bs-toggle":"dropdown"},[t("i",{class:"bx bx-dots-vertical-rounded"})],-1)),Ue={class:"dropdown-menu"},Ne=["onClick"],Je=n(()=>t("i",{class:"bx bx-edit-alt me-1"},null,-1)),Oe=["onClick"],Me=n(()=>t("i",{class:"bx bx-trash me-1"},null,-1)),Ke=n(()=>t("td",{colspan:"3",class:"text-end fs-6"},"ລວມທັງໝົດ",-1)),Qe={class:"text-center"},ze={class:"text-end"},He={key:0},We=n(()=>t("td",{colspan:"4",class:"text-end fs-6"},[_(" ສ່ວນຫຼຸດ "),t("i",{class:"mdi mdi-archive-edit align-middle fs-6 text-danger"})],-1)),Xe={class:"text-end d-flex align-items-center justify-content-end"},Ye={key:0},Ze={key:2,class:"fs-6",style:{"padding-top":"2px"}},$e={key:0},ts={colspan:"4",class:"text-end"},es={class:"d-flex justify-content-end fs-6"},ss={key:0,class:"form-check form-switch ms-2"},os={class:"text-end"},is={key:0},ns={key:0,style:{position:"relative"}},cs={style:{position:"absolute"}},ds={class:"row"},rs={class:"col md-12"},ls={class:"card border-dashed border-2 border-warning mt-3"},as={class:"card-body p-3"},_s={class:"d-flex justify-content-between mt-2"},ms={class:"me-4"},hs={class:"form-check"},us=n(()=>t("label",{class:"form-check-label",for:"formCheck1"}," ຊຳລ່ະດ້ວຍ ເງິນສົດ ",-1)),ps={class:"form-check"},fs=n(()=>t("label",{class:"form-check-label",for:"formCheck2"}," ຊຳລ່ະດ້ວຍ ເງິນໂອນ ",-1)),bs={key:1,class:"table align-middle table-nowrap mb-0"},ys={key:0},gs=n(()=>t("td",{class:"text-end pe-2 fw-bold"},"ລວມທັງໝົດ:",-1)),vs={style:{width:"238px"},class:"border px-3 py-2 text-end fs-5 fw-bold"},Rs={key:1},xs=n(()=>t("td",{class:"text-end pe-2 fw-bold"},"ຊຳລ່ະແລ້ວ:",-1)),ks={style:{width:"238px"},class:"border px-3 py-2 text-end fs-5 fw-bold"},ws=n(()=>t("td",{class:"text-end pe-2 fw-bold"},"ລວມເງິນຕ້ອງຊຳລ່ະ:",-1)),Fs={style:{width:"238px"},class:"border px-3 py-2 text-end fs-5 fw-bold"},Cs=n(()=>t("td",{class:"text-end pe-2 fw-bold text-info"}," ຮັບເງິນນຳລູກຄ້າ: ",-1)),Ss={style:{width:"238px"},class:"border px-3 py-2 text-end fs-5 fw-bold d-flex align-items-center"},Ps=n(()=>t("span",{class:"fs-6 p-0 text-info",style:{"padding-top":"6px"}},null,-1)),Ls={key:2},Es=n(()=>t("td",{class:"text-end pe-2 fw-bold text-danger"},"ເງິນທອນ:",-1)),Ds={style:{width:"238px"},class:"border text-danger px-3 py-2 text-end fs-5 fw-bold"},Vs={key:2,class:"table align-middle table-nowrap mb-0"},Ts={key:0},js=n(()=>t("td",{class:"text-end pe-2 fw-bold"},"ລວມທັງໝົດ:",-1)),qs={style:{width:"238px"},class:"border px-3 py-2 text-end fs-5 fw-bold"},Bs={class:"d-flex justify-content-end mt-4 align-items-center"},As={class:"form-check me-4"},Gs=n(()=>t("label",{class:"form-check-label",for:"prnt-4a"}," ພິມບິນພ້ອມ ",-1)),Is=["disabled"],Us={key:0},Ns={key:1,class:"spinner-border text-warning",role:"status"},Js=n(()=>t("span",{class:"visually-hidden"},"Loading...",-1)),Os=[Js],Ms=n(()=>t("button",{type:"button",class:"btn btn-label-secondary","data-bs-dismiss":"modal"}," ຍົກເລີກ ",-1));function Ks(o,e,p,m,i,r){const P=R("pagination"),b=R("cleave");return c(),d(y,null,[t("div",A,[t("div",G,[I,o.loading_table?(c(),d("div",U,J)):a("",!0)]),t("div",O,[t("div",M,[t("div",K,[t("div",Q,[t("div",{class:"cursor-pointer",onClick:e[0]||(e[0]=s=>r.ChangeSort())},[i.Sort=="asc"?(c(),d("i",z)):(c(),d("i",H))]),h(t("select",{class:"form-select me-2","onUpdate:modelValue":e[1]||(e[1]=s=>o.PerPage=s),onChange:e[2]||(e[2]=s=>r.GetRec())},Z,544),[[x,o.PerPage]]),h(t("select",{class:"form-select me-2","onUpdate:modelValue":e[3]||(e[3]=s=>i.Status=s),onChange:e[4]||(e[4]=s=>r.GetRec())},ot,544),[[x,i.Status]])]),t("div",it,[h(t("input",{type:"text",class:"form-control me-2","onUpdate:modelValue":e[5]||(e[5]=s=>o.Search=s),onKeyup:e[6]||(e[6]=k(s=>r.GetRec(),["enter"])),placeholder:"ຄົ້ນຫາ..."},null,544),[[g,o.Search]]),m.store.get_permissions.includes("REC_ACC_EDIT")||JSON.parse(m.store.get_user).user_type=="admin"?(c(),d("button",{key:0,class:"btn btn-primary",onClick:e[7]||(e[7]=s=>r.AddRec())},"ເພີ່ມໃໝ່")):a("",!0)])]),t("table",nt,[ct,i.RecData.data.length>0?(c(),d("tbody",dt,[(c(!0),d(y,null,v(i.RecData.data,s=>(c(),d("tr",{key:s.id},[t("td",null,l(s.rec_id),1),t("td",null,l(o.date(s.created_at)),1),t("td",null,l(s.customer_name),1),t("td",rt,l(o.formatPrice(s.total_price))+" ກີບ",1),t("td",null,[s.status=="success"?(c(),d("span",lt,"ຊຳລ່ະແລ້ວ")):a("",!0),s.status=="reject"?(c(),d("span",at,"ຍົກເລີກ")):a("",!0),s.status=="padding"?(c(),d("span",_t,"ດຳເນີນການ")):a("",!0)]),t("td",null,l(s.user_name),1),t("td",mt,[t("div",ht,[ut,t("div",pt,[t("a",{class:"dropdown-item",href:"javascript:void(0);",onClick:f=>r.PtintBill(s.rec_id,JSON.parse(m.store.get_setting).printer_default)},[bt,_(" ປຼິນ")],8,ft),m.store.get_permissions.includes("REC_ACC_EDIT")||JSON.parse(m.store.get_user).user_type=="admin"?(c(),d("a",{key:0,class:"dropdown-item",href:"javascript:void(0);",onClick:f=>r.EditRec(s.id)},[gt,_(" ແກ້ໄຂ")],8,yt)):a("",!0),m.store.get_permissions.includes("REC_ACC_DEL")||JSON.parse(m.store.get_user).user_type=="admin"?(c(),d("a",{key:1,class:"dropdown-item",href:"javascript:void(0);",onClick:f=>r.DelRec(s.id)},[Rt,_(" ຍົກເລີກ")],8,vt)):a("",!0)])])])]))),128))])):(c(),d("tbody",xt,wt))]),u(P,{pagination:i.RecData,onPaginate:e[8]||(e[8]=s=>r.GetRec(s)),offset:4},null,8,["pagination"])])])]),t("div",Ft,[t("div",Ct,[t("div",St,[t("div",Pt,[t("button",Lt,null,512)]),t("div",Et,[t("div",Dt,[t("div",Vt,[t("span",null,[_("ໃບບິນເລກທີ່: "),t("span",Tt,l(i.RecForm.rec_id),1)])]),t("div",jt,[t("button",{type:"button",class:"btn btn-warning me-2",onClick:e[9]||(e[9]=s=>r.PtintBill(i.RecForm.rec_id,"quo"))},[qt,_(" ສະເໜີລາຄາ ")]),t("button",{type:"button",class:"btn btn-warning me-2",onClick:e[10]||(e[10]=s=>r.PtintBill(i.RecForm.rec_id,"80"))},[Bt,_(" 80mm ")]),t("button",{type:"button",class:"btn btn-warning",onClick:e[11]||(e[11]=s=>r.PtintBill(i.RecForm.rec_id,"a4"))},[At,_(" A4 ")])])]),u(F,{name:"slide-fade"},{default:w(()=>[i.rec_form?(c(),d("div",Gt,[t("div",It,[t("div",Ut,[Nt,h(t("input",{type:"text",class:"form-control",id:"list-name",ref:"list_name","onUpdate:modelValue":e[12]||(e[12]=s=>i.RecListFormEdit.rec_name=s)},null,512),[[g,i.RecListFormEdit.rec_name]])])]),t("div",Jt,[t("div",Ot,[Mt,u(b,{options:o.options,class:"form-control",id:"list-qty",modelValue:i.RecListFormEdit.qty,"onUpdate:modelValue":e[13]||(e[13]=s=>i.RecListFormEdit.qty=s)},null,8,["options","modelValue"])]),t("div",Kt,[Qt,t("div",zt,[u(b,{options:o.options,class:"form-control text-end",id:"list-price",modelValue:i.RecListFormEdit.price,"onUpdate:modelValue":e[14]||(e[14]=s=>i.RecListFormEdit.price=s)},null,8,["options","modelValue"]),Ht])])]),t("div",Wt,[t("button",{type:"button",class:"btn btn-primary me-2",disabled:r.check_rec_list_form,onClick:e[15]||(e[15]=s=>r.SaveRecList())},[o.loading_post?(c(),d("div",Zt,te)):(c(),d("span",Yt,"ບັນທຶກ"))],8,Xt),t("button",{type:"button",class:"btn btn-label-secondary",onClick:e[16]||(e[16]=(...s)=>r.CancelRecList&&r.CancelRecList(...s))}," ຍົກເລີກ ")])])):a("",!0)]),_:1}),u(F,{name:"slide-fade"},{default:w(()=>[i.rec_form?a("",!0):(c(),d("div",ee,[t("div",se,[t("div",oe,[i.RecForm.customer_id?(c(),d("div",ie,[t("span",null,"ລູກຄ້າ: "+l(i.RecForm.customer_name)+" ("+l(i.RecForm.customer_tel)+")",1),ne,t("span",null,"ທີ່ຢູ່: "+l(i.RecForm.customer_address),1)])):(c(),d("div",ce,"ລູກຄ້າ: ບຸກຄົນທົ່ວໄປ")),t("div",de,[t("button",{type:"button",class:"btn btn-icon rounded-pill btn-primary","data-bs-toggle":"dropdown","aria-expanded":"false",onClick:e[17]||(e[17]=s=>r.Csearch())},le),t("div",ae,[t("div",_e,[h(t("input",{type:"text",class:"form-control rounded-pill",placeholder:"ຄົ້ນຫາລູກຄ້າ...","onUpdate:modelValue":e[18]||(e[18]=s=>i.SearchCus=s),onKeyup:e[19]||(e[19]=k(s=>r.GetCus(),["enter"])),ref:"search_cus"},null,544),[[g,i.SearchCus]])]),(c(!0),d(y,null,v(i.CustomerData,s=>(c(),d("a",{key:s.id,onClick:f=>r.addCus(s.id,s.name,s.last_name,s.gender,s.tel,s.address),class:"dropdown-item align-middle d-flex align-items-center justify-content-between cursor-pointer"},[t("span",null,[s.gender=="female"?(c(),d("span",he,"ນ")):a("",!0),_(" "+l(s.name)+" "+l(s.last_name),1)]),ue],8,me))),128))])])]),t("div",pe,[i.RecForm.status=="padding"||i.RecForm.status=="created"?(c(),d("button",{key:0,type:"button",class:"btn rounded-pill btn-icon btn-info me-2",onClick:e[20]||(e[20]=s=>r.AddRecList())},be)):a("",!0)])]),t("div",ye,[t("div",ge,[t("span",ve,[_("ການຊຳລ່ະ: "),i.RecForm.status=="success"?(c(),d("span",Re,[xe,_(" ຊຳລ່ະແລ້ວ ")])):(c(),d("span",ke,[we,_(" ຍັງບໍ່ຊຳລ່ະ")]))])]),t("table",Fe,[t("thead",Ce,[t("tr",null,[Se,Pe,Le,Ee,De,i.RecForm.status=="padding"||i.RecForm.status=="created"?(c(),d("th",Ve," ຈັດການ ")):a("",!0)])]),t("tbody",null,[(c(!0),d(y,null,v(i.RecListForm,(s,f)=>(c(),d("tr",{key:s.id},[t("td",Te,l(f+1),1),t("td",null,l(s.rec_name),1),t("td",je,l(o.formatPrice(s.price)),1),t("td",qe,l(o.formatPrice(s.qty)),1),t("td",Be,l(o.formatPrice(s.price*s.qty)),1),i.RecForm.status=="padding"||i.RecForm.status=="created"?(c(),d("td",Ae,[t("div",Ge,[Ie,t("div",Ue,[t("a",{class:"dropdown-item",href:"javascript:void(0);",onClick:L=>r.EditRecList(s.id)},[Je,_(" ແກ້ໄຂ")],8,Ne),t("a",{class:"dropdown-item",href:"javascript:void(0);",onClick:L=>r.DeleteRecList(s.id)},[Me,_(" ລຶບ")],8,Oe)])])])):a("",!0)]))),128)),t("tr",null,[Ke,t("td",Qe,l(o.formatPrice(r.TotalQty)),1),t("td",ze,l(o.formatPrice(r.TotalSum)),1),i.RecForm.status=="padding"||i.RecForm.status=="created"?(c(),d("td",He)):a("",!0)]),t("tr",null,[We,t("td",Xe,[i.RecForm.status=="success"?(c(),d("span",Ye,l(o.formatPrice(i.PaySetting.rec_discount)),1)):a("",!0),i.RecForm.status=="padding"||i.RecForm.status=="created"?(c(),T(b,{key:1,type:"text",class:"form-control p-1 fs-6 border-danger text-end border-1 me-1",options:o.options,modelValue:i.PaySetting.rec_discount,"onUpdate:modelValue":e[21]||(e[21]=s=>i.PaySetting.rec_discount=s)},null,8,["options","modelValue"])):a("",!0),i.RecForm.status=="padding"||i.RecForm.status=="created"?(c(),d("span",Ze)):a("",!0)]),i.RecForm.status=="padding"||i.RecForm.status=="created"?(c(),d("td",$e)):a("",!0)]),t("tr",null,[t("td",ts,[t("div",es,[_(" ອມພ("+l(JSON.parse(m.store.get_setting).tax_value)+"%) ",1),i.RecForm.status=="padding"||i.RecForm.status=="created"?(c(),d("div",ss,[h(t("input",{class:"form-check-input",type:"checkbox",role:"switch",checked:!1,"onUpdate:modelValue":e[22]||(e[22]=s=>i.PaySetting.rec_vat=s)},null,512),[[C,i.PaySetting.rec_vat]])])):a("",!0)])]),t("td",os,l(o.formatPrice(r.CalVat)),1),i.RecForm.status=="padding"||i.RecForm.status=="created"?(c(),d("td",is)):a("",!0)])])]),i.RecForm.payed>=r.CalTotal?a("",!0):(c(),d("div",ns,[t("div",cs,[t("div",ds,[t("div",rs,[t("div",ls,[t("div",as,[t("div",_s,[t("span",ms,[t("div",hs,[h(t("input",{class:"form-check-input",type:"radio",id:"formCheck1",name:"payby",value:"cash","onUpdate:modelValue":e[23]||(e[23]=s=>i.PaySetting.PayBy=s)},null,512),[[S,i.PaySetting.PayBy]]),us])]),t("span",null,[t("div",ps,[h(t("input",{class:"form-check-input",type:"radio",name:"payby",id:"formCheck2",value:"bank","onUpdate:modelValue":e[24]||(e[24]=s=>i.PaySetting.PayBy=s)},null,512),[[S,i.PaySetting.PayBy]]),fs])])])])])])])])])),i.RecForm.payed>=r.CalTotal?(c(),d("table",Vs,[i.RecForm.payed?(c(),d("tr",Ts,[js,t("td",qs,l(o.formatPrice(r.CalTotal)),1)])):a("",!0)])):(c(),d("table",bs,[i.RecForm.payed?(c(),d("tr",ys,[gs,t("td",vs,l(o.formatPrice(r.CalTotal)),1)])):a("",!0),i.RecForm.payed?(c(),d("tr",Rs,[xs,t("td",ks,l(o.formatPrice(i.RecForm.payed)),1)])):a("",!0),t("tr",null,[ws,t("td",Fs,l(o.formatPrice(r.CalTotal-i.RecForm.payed)),1)]),t("tr",null,[Cs,t("td",Ss,[u(b,{type:"text",class:"form-control text-info p-1 fs-5 fw-bold border-danger text-end border-1 me-1",options:o.options,modelValue:i.PaySetting.customer_pay,"onUpdate:modelValue":e[25]||(e[25]=s=>i.PaySetting.customer_pay=s)},null,8,["options","modelValue"]),Ps])]),i.PaySetting.customer_pay-(r.CalTotal-i.RecForm.payed)>0?(c(),d("tr",Ls,[Es,t("td",Ds,l(o.formatPrice(i.PaySetting.customer_pay-(r.CalTotal-i.RecForm.payed)))+" ₭ ",1)])):a("",!0)]))]),t("div",Bs,[t("div",As,[h(t("input",{class:"form-check-input",type:"checkbox",id:"prnt-4a","onUpdate:modelValue":e[26]||(e[26]=s=>i.PrintA4=s)},null,512),[[C,i.PrintA4]]),Gs]),t("button",{type:"button",class:"btn btn-primary me-2",disabled:r.check_rec_form,onClick:e[27]||(e[27]=s=>r.SaveRec())},[o.loading_post?(c(),d("div",Ns,Os)):(c(),d("span",Us,"ບັນທຶກ"))],8,Is),Ms])]))]),_:1})])])])])],64)}const zs=E(B,[["render",Ks],["__scopeId","data-v-7bdb4b65"]]);export{zs as default};
