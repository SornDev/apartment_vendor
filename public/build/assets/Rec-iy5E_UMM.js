import{_ as E,u as D,m as V,r as R,o as c,c as d,b as t,d as l,w as m,g as x,v as g,l as k,F as y,h as v,e as u,i as _,t as a,f as w,T as F,x as T,y as C,n as S,p as j,j as A}from"./app-JtYbRyaD.js";const q={name:"DmsRec",setup(){return{store:D()}},mixins:[V],data(){return{rec_form:!1,RecData:{data:[]},PrintA4:!0,Status:"",Sort:"desc",RecForm:{rec_id:"",customer_name:"",customer_phone:"",customer_address:"",customer_id:"",status:"",payed:""},RecListForm:[],RecListFormEdit:{rec_name:"",price:"",qty:""},RecListEditID:"",PaySetting:{rec_discount:0,rec_vat:!1,rec_total:0,customer_pay:0,PayBy:"cash"},CustomerData:[],SearchCus:""}},computed:{check_rec_list_form(){return this.RecListFormEdit.rec_name==""||this.RecListFormEdit.qty==""||this.RecListFormEdit.price==""},check_rec_form(){return this.RecListForm.length==0||this.RecForm.customer_id==null||this.RecForm.customer_id==""?!0:!!this.loading_post},TotalSum(){var o=0;return this.RecListForm.forEach(e=>{o+=e.price*e.qty}),o},TotalQty(){var o=0;return this.RecListForm.forEach(e=>{o+=parseInt(e.qty)}),o},CalVat(){let o=0;return this.PaySetting.rec_vat&&(o=(this.TotalSum-this.PaySetting.rec_discount)*JSON.parse(this.store.get_setting).tax_value/100),o},CalTotal(){return this.TotalSum-this.PaySetting.rec_discount+this.CalVat}},mounted(){},methods:{Csearch(){this.SearchCus="",setTimeout(()=>{this.$refs.search_cus.focus()},600)},PtintBill(o,e){e=="80"&&this.openLink(window.location.origin+`/api/rec/print/80mm/${o}`),e=="a4"&&this.openLink(window.location.origin+`/api/rec/print/a4/${o}`),e=="quo"&&this.openLink(window.location.origin+`/api/rec/print/quo/${o}`)},GetCus(){this.GetData(`cus/search?search=${this.SearchCus}`,o=>{this.CustomerData=o})},addCus(o,e,p,h,i,r){this.RecForm.customer_id=o,this.RecForm.customer_name=h=="female"?"ນ "+e+" "+p:e+" "+p,this.RecForm.customer_tel=i,this.RecForm.customer_address=r,this.CustomerData=[]},ChangeSort(){this.Sort=="asc"?this.Sort="desc":this.Sort="asc",this.GetRec()},GetRec(o){this.GetData(`rec/get?page=${o}&perpage=${this.PerPage}&sort=${this.Sort}&search=${this.Search}&status=${this.Status}`,e=>{this.RecData=e})},AddRecList(){this.rec_form=!0,this.RecListEditID="",this.RecListFormEdit={rec_name:"",price:"",qty:1},setTimeout(()=>{this.$refs.list_name.focus()},1e3)},EditRecList(o){this.rec_form=!0,this.RecListEditID=o,this.RecListForm.forEach(e=>{e.id==o&&(this.RecListFormEdit=e)})},SaveRecList(){this.RecListEditID?this.RecListForm.forEach(o=>{o.id==this.RecListEditID&&(o.rec_name=this.RecListFormEdit.rec_name,o.price=this.RecListFormEdit.price,o.qty=this.RecListFormEdit.qty)}):this.RecListForm.push(this.RecListFormEdit),this.rec_form=!1},DeleteRecList(o){this.RecListForm=this.RecListForm.filter(e=>e.id!==o)},CancelRecList(){this.rec_form=!1},AddRec(){this.RecForm={rec_id:"",customer_name:"",customer_phone:"",customer_address:"",customer_id:"",status:""},this.FormType=!0,this.RecListForm=[],this.PaySetting.rec_discount=0,this.PaySetting.customer_pay=0,this.PaySetting.rec_vat=!1,this.AddData("rec/add",{rec_form:this.RecForm,rec_list_form:this.RecListForm,pay_setting:this.PaySetting},o=>{o.success&&this.EditRec(o.bid)},"no")},EditRec(o){this.PrintA4=!0,this.FormType=!1,this.PaySetting.customer_pay=0,this.EditData("rec/edit",o,e=>{this.RecForm=e.rec,this.RecForm.payed=e.payed,this.PaySetting.rec_discount=e.rec.rec_discount,this.PaySetting.rec_vat=e.rec.rec_vat==1,this.RecListForm=e.rec_list;var p=new bootstrap.Modal(document.getElementById("rec_form"),{keyboard:!1});p.show()})},SaveRec(){this.FormType?this.AddData("rec/add",{rec_form:this.RecForm,rec_list_form:this.RecListForm,pay_setting:this.PaySetting},o=>{o.success&&(this.GetRec(),this.$refs.close_rec_form.click())}):(this.PaySetting.rec_vat==!0?this.PaySetting.rec_vat=1:this.PaySetting.rec_vat=0,this.UpdateData(`rec/update/${this.EditID}`,{rec_form:this.RecForm,rec_list_form:this.RecListForm,pay_setting:this.PaySetting},o=>{o.success&&(this.GetRec(),this.$refs.close_rec_form.click(),this.PrintA4&&this.PtintBill(this.RecForm.rec_id,JSON.parse(this.store.get_setting).printer_default))}))},DelRec(o){this.DeleteData("rec/delete",o,e=>{this.GetRec()},"ທີ່ທ່ານຕ້ອງຍົກເລີກລາຍການນີ້?")}},created(){this.GetRec()},watch:{Search:function(o){o==""&&this.GetRec()}}},n=o=>(j("data-v-6e65ef4c"),o=o(),A(),o),B={class:"card"},G={class:"card-header d-flex"},I=n(()=>t("h5",{class:"mb-0"},"ລາຍການໃບບິນ",-1)),U={key:0,class:"spinner-grow spinner-grow-sm text-warning ms-2",role:"status"},N=n(()=>t("span",{class:"visually-hidden"},"Loading...",-1)),J=[N],O={class:"card-body"},M={class:"table-responsive text-nowrap"},K={class:"d-flex justify-content-between mb-2"},Q={class:"d-flex justify-content-between align-items-center"},z={key:0,class:"bx bx-sort-up fs-4 me-2"},H={key:1,class:"bx bx-sort-down fs-4 me-2"},W=n(()=>t("option",{value:"10"},"10",-1)),X=n(()=>t("option",{value:"20"},"20",-1)),Y=n(()=>t("option",{value:"30"},"30",-1)),Z=[W,X,Y],$=n(()=>t("option",{value:""},"ສະຖານະ",-1)),tt=n(()=>t("option",{value:"padding"},"ກຳລັງດຳເນີນການ",-1)),et=n(()=>t("option",{value:"success"},"ສຳເລັດ",-1)),st=n(()=>t("option",{value:"reject"},"ຍົກເລີກ",-1)),ot=[$,tt,et,st],it={class:"d-flex"},nt={class:"table table-bordered shadow-sm"},ct={class:"table-info"},dt=n(()=>t("th",{class:"fs-6 fw-bold",width:"140"},"ເລກທີ່",-1)),rt=n(()=>t("th",{class:"fs-6 fw-bold",width:"122"},"ວັນທີ່",-1)),lt=n(()=>t("th",{class:"fs-6 fw-bold"},"ລູກຄ້າ",-1)),at=n(()=>t("th",{class:"fs-6 fw-bold text-center",width:"160"},"ລາຄາ",-1)),_t=n(()=>t("th",{class:"fs-6 fw-bold",width:"120"},"ສະຖານະ",-1)),ht=n(()=>t("th",{class:"fs-6 fw-bold"},"ຜູ້ບັນທຶກ",-1)),mt={key:0,class:"fs-6 fw-bold",width:"100"},ut={key:0},pt={class:"text-end"},ft={key:0,class:"badge bg-label-success me-1"},bt={key:1,class:"badge bg-label-danger me-1"},yt={key:2,class:"badge bg-label-warning me-1"},gt={class:"text-center"},vt={class:"dropdown"},Rt=n(()=>t("button",{type:"button",class:"btn p-0 dropdown-toggle hide-arrow","data-bs-toggle":"dropdown"},[t("i",{class:"bx bx-dots-vertical-rounded"})],-1)),xt={class:"dropdown-menu"},kt=["onClick"],wt=n(()=>t("i",{class:"bx bx-printer me-1"},null,-1)),Ft=["onClick"],Ct=n(()=>t("i",{class:"bx bx-edit-alt me-1"},null,-1)),St=["onClick"],Pt=n(()=>t("i",{class:"bx bx-trash me-1"},null,-1)),Lt={key:1},Et=n(()=>t("tr",null,[t("td",{colspan:"7",class:"text-center"},[t("i",{class:"bx bxs-data me-1"}),_(" ບໍ່ມີຂໍ້ມູນ ")])],-1)),Dt=[Et],Vt={class:"modal modal-top modal-lg fade",id:"rec_form",tabindex:"-1",style:{display:"none"},"data-bs-backdrop":"static","aria-hidden":"true"},Tt={class:"modal-dialog"},jt={class:"modal-content"},At={class:"modal-header"},qt={type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",ref:"close_rec_form"},Bt={class:"modal-body pt-0"},Gt={class:"row mb-3"},It={class:"col-md-6 fs-5 fw-bold"},Ut={class:"text-danger"},Nt={class:"col-md-6 text-end"},Jt=n(()=>t("i",{class:"bx bxs-printer"},null,-1)),Ot=n(()=>t("i",{class:"bx bxs-printer"},null,-1)),Mt=n(()=>t("i",{class:"bx bxs-printer"},null,-1)),Kt={key:0,class:"outer"},Qt={class:"row mb-2"},zt={class:"col-md-12"},Ht=n(()=>t("label",{for:"list-name",class:"form-label fs-6"},"ຊື່ລາຍການ",-1)),Wt={class:"row mb-2"},Xt={class:"col-md-2"},Yt=n(()=>t("label",{for:"list-qty",class:"form-label fs-6"},"ຈຳນວນ",-1)),Zt={class:"col-md-3"},$t=n(()=>t("label",{for:"list-price",class:"form-label fs-6"},"ລາຄາ",-1)),te={class:"input-group"},ee=n(()=>t("span",{class:"input-group-text"},"₭",-1)),se={class:"d-flex justify-content-end mt-4"},oe=["disabled"],ie={key:0},ne={key:1,class:"spinner-border text-warning",role:"status"},ce=n(()=>t("span",{class:"visually-hidden"},"Loading...",-1)),de=[ce],re={key:0,class:"outer"},le={class:"row mb-2"},ae={class:"col-md-6 d-flex justify-content-between"},_e={key:0},he=n(()=>t("br",null,null,-1)),me={key:1},ue={class:"btn-group"},pe=n(()=>t("i",{class:"bx bx-search"},null,-1)),fe=[pe],be={class:"dropdown-menu",style:{width:"max-content"}},ye={class:"p-2"},ge=["onClick"],ve={key:0},Re=n(()=>t("i",{class:"bx bxs-left-top-arrow-circle ms-2"},null,-1)),xe={class:"col-md-6 text-end"},ke=n(()=>t("i",{class:"bx bx-plus fs-5"},null,-1)),we=[ke],Fe={class:"table-responsive text-nowrap"},Ce={class:"text-end"},Se={class:"me-4 fs-6"},Pe={key:0,class:"text-success"},Le=n(()=>t("i",{class:"bx bxs-check-shield fs-4"},null,-1)),Ee={key:1,class:"text-danger"},De=n(()=>t("i",{class:"bx bxs-shield-x fs-4"},null,-1)),Ve={class:"table table-bordered align-middle table-nowrap mb-0"},Te={class:"table-light"},je=n(()=>t("th",{scope:"col",width:"50",class:"text-center fs-6"}," ລຳດັບ ",-1)),Ae=n(()=>t("th",{scope:"col",class:"fs-6"},"ເນື້ອໃນລາຍການ",-1)),qe=n(()=>t("th",{scope:"col",width:"110",class:"text-center fs-6"}," ລາຄາ ",-1)),Be=n(()=>t("th",{scope:"col",width:"100",class:"text-center fs-6"}," ຈຳນວນ ",-1)),Ge=n(()=>t("th",{scope:"col",width:"150",class:"text-end fs-6"},"ລວມ",-1)),Ie={key:0,scope:"col",class:"fs-6 text-center",width:"88"},Ue={class:"text-center"},Ne={class:"text-end"},Je={class:"text-center"},Oe={class:"text-end"},Me={key:0,class:"text-center"},Ke={class:"dropdown"},Qe=n(()=>t("button",{type:"button",class:"btn p-0 dropdown-toggle hide-arrow","data-bs-toggle":"dropdown"},[t("i",{class:"bx bx-dots-vertical-rounded"})],-1)),ze={class:"dropdown-menu"},He=["onClick"],We=n(()=>t("i",{class:"bx bx-edit-alt me-1"},null,-1)),Xe=["onClick"],Ye=n(()=>t("i",{class:"bx bx-trash me-1"},null,-1)),Ze=n(()=>t("td",{colspan:"3",class:"text-end fs-6"},"ລວມທັງໝົດ",-1)),$e={class:"text-center"},ts={class:"text-end"},es={key:0},ss=n(()=>t("td",{colspan:"4",class:"text-end fs-6"},[_(" ສ່ວນຫຼຸດ "),t("i",{class:"mdi mdi-archive-edit align-middle fs-6 text-danger"})],-1)),os={class:"text-end d-flex align-items-center justify-content-end"},is={key:0},ns={key:2,class:"fs-6",style:{"padding-top":"2px"}},cs={key:0},ds={colspan:"4",class:"text-end"},rs={class:"d-flex justify-content-end fs-6"},ls={key:0,class:"form-check form-switch ms-2"},as={class:"text-end"},_s={key:0},hs={key:0,style:{position:"relative"}},ms={style:{position:"absolute"}},us={class:"row"},ps={class:"col md-12"},fs={class:"card border-dashed border-2 border-warning mt-3"},bs={class:"card-body p-3"},ys={class:"d-flex justify-content-between mt-2"},gs={class:"me-4"},vs={class:"form-check"},Rs=n(()=>t("label",{class:"form-check-label",for:"formCheck1"}," ຊຳລ່ະດ້ວຍ ເງິນສົດ ",-1)),xs={class:"form-check"},ks=n(()=>t("label",{class:"form-check-label",for:"formCheck2"}," ຊຳລ່ະດ້ວຍ ເງິນໂອນ ",-1)),ws={key:1,class:"table align-middle table-nowrap mb-0"},Fs={key:0},Cs=n(()=>t("td",{class:"text-end pe-2 fw-bold"},"ລວມທັງໝົດ:",-1)),Ss={style:{width:"238px"},class:"border px-3 py-2 text-end fs-5 fw-bold"},Ps={key:1},Ls=n(()=>t("td",{class:"text-end pe-2 fw-bold"},"ຊຳລ່ະແລ້ວ:",-1)),Es={style:{width:"238px"},class:"border px-3 py-2 text-end fs-5 fw-bold"},Ds=n(()=>t("td",{class:"text-end pe-2 fw-bold"},"ລວມເງິນຕ້ອງຊຳລ່ະ:",-1)),Vs={style:{width:"238px"},class:"border px-3 py-2 text-end fs-5 fw-bold"},Ts=n(()=>t("td",{class:"text-end pe-2 fw-bold text-info"}," ຮັບເງິນນຳລູກຄ້າ: ",-1)),js={style:{width:"238px"},class:"border px-3 py-2 text-end fs-5 fw-bold d-flex align-items-center"},As=n(()=>t("span",{class:"fs-6 p-0 text-info",style:{"padding-top":"6px"}},null,-1)),qs={key:2},Bs=n(()=>t("td",{class:"text-end pe-2 fw-bold text-danger"},"ເງິນທອນ:",-1)),Gs={style:{width:"238px"},class:"border text-danger px-3 py-2 text-end fs-5 fw-bold"},Is={key:2,class:"table align-middle table-nowrap mb-0"},Us={key:0},Ns=n(()=>t("td",{class:"text-end pe-2 fw-bold"},"ລວມທັງໝົດ:",-1)),Js={style:{width:"238px"},class:"border px-3 py-2 text-end fs-5 fw-bold"},Os={class:"d-flex justify-content-end mt-4 align-items-center"},Ms={class:"form-check me-4"},Ks=n(()=>t("label",{class:"form-check-label",for:"prnt-4a"}," ພິມບິນພ້ອມ ",-1)),Qs=["disabled"],zs={key:0},Hs={key:1,class:"spinner-border text-warning",role:"status"},Ws=n(()=>t("span",{class:"visually-hidden"},"Loading...",-1)),Xs=[Ws],Ys=n(()=>t("button",{type:"button",class:"btn btn-label-secondary","data-bs-dismiss":"modal"}," ຍົກເລີກ ",-1));function Zs(o,e,p,h,i,r){const P=R("pagination"),b=R("cleave");return c(),d(y,null,[t("div",B,[t("div",G,[I,o.loading_table?(c(),d("div",U,J)):l("",!0)]),t("div",O,[t("div",M,[t("div",K,[t("div",Q,[t("div",{class:"cursor-pointer",onClick:e[0]||(e[0]=s=>r.ChangeSort())},[i.Sort=="asc"?(c(),d("i",z)):(c(),d("i",H))]),m(t("select",{class:"form-select me-2","onUpdate:modelValue":e[1]||(e[1]=s=>o.PerPage=s),onChange:e[2]||(e[2]=s=>r.GetRec())},Z,544),[[x,o.PerPage]]),m(t("select",{class:"form-select me-2","onUpdate:modelValue":e[3]||(e[3]=s=>i.Status=s),onChange:e[4]||(e[4]=s=>r.GetRec())},ot,544),[[x,i.Status]])]),t("div",it,[m(t("input",{type:"text",class:"form-control me-2","onUpdate:modelValue":e[5]||(e[5]=s=>o.Search=s),onKeyup:e[6]||(e[6]=k(s=>r.GetRec(),["enter"])),placeholder:"ຄົ້ນຫາ..."},null,544),[[g,o.Search]]),h.store.get_permissions.includes("REC_ACC_EDIT")||JSON.parse(h.store.get_user).user_type=="admin"?(c(),d("button",{key:0,class:"btn btn-primary",onClick:e[7]||(e[7]=s=>r.AddRec())},"ເພີ່ມໃໝ່")):l("",!0)])]),t("table",nt,[t("thead",null,[t("tr",ct,[dt,rt,lt,at,_t,ht,h.store.get_permissions.includes("REC_ACC_EDIT")||h.store.get_permissions.includes("REC_ACC_DEL")||JSON.parse(h.store.get_user).user_type=="admin"?(c(),d("th",mt,"ຈັດການ")):l("",!0)])]),i.RecData.data.length>0?(c(),d("tbody",ut,[(c(!0),d(y,null,v(i.RecData.data,s=>(c(),d("tr",{key:s.id},[t("td",null,a(s.rec_id),1),t("td",null,a(o.date(s.created_at)),1),t("td",null,a(s.customer_name),1),t("td",pt,a(o.formatPrice(s.total_price))+" ກີບ",1),t("td",null,[s.status=="success"?(c(),d("span",ft,"ຊຳລ່ະແລ້ວ")):l("",!0),s.status=="reject"?(c(),d("span",bt,"ຍົກເລີກ")):l("",!0),s.status=="padding"?(c(),d("span",yt,"ດຳເນີນການ")):l("",!0)]),t("td",null,a(s.user_name),1),t("td",gt,[t("div",vt,[Rt,t("div",xt,[t("a",{class:"dropdown-item",href:"javascript:void(0);",onClick:f=>r.PtintBill(s.rec_id,JSON.parse(h.store.get_setting).printer_default)},[wt,_(" ປຼິນ")],8,kt),h.store.get_permissions.includes("REC_ACC_EDIT")||JSON.parse(h.store.get_user).user_type=="admin"?(c(),d("a",{key:0,class:"dropdown-item",href:"javascript:void(0);",onClick:f=>r.EditRec(s.id)},[Ct,_(" ແກ້ໄຂ")],8,Ft)):l("",!0),h.store.get_permissions.includes("REC_ACC_DEL")||JSON.parse(h.store.get_user).user_type=="admin"?(c(),d("a",{key:1,class:"dropdown-item",href:"javascript:void(0);",onClick:f=>r.DelRec(s.id)},[Pt,_(" ຍົກເລີກ")],8,St)):l("",!0)])])])]))),128))])):(c(),d("tbody",Lt,Dt))]),u(P,{pagination:i.RecData,onPaginate:e[8]||(e[8]=s=>r.GetRec(s)),offset:4},null,8,["pagination"])])])]),t("div",Vt,[t("div",Tt,[t("div",jt,[t("div",At,[t("button",qt,null,512)]),t("div",Bt,[t("div",Gt,[t("div",It,[t("span",null,[_("ໃບບິນເລກທີ່: "),t("span",Ut,a(i.RecForm.rec_id),1)])]),t("div",Nt,[t("button",{type:"button",class:"btn btn-warning me-2",onClick:e[9]||(e[9]=s=>r.PtintBill(i.RecForm.rec_id,"quo"))},[Jt,_(" ສະເໜີລາຄາ ")]),t("button",{type:"button",class:"btn btn-warning me-2",onClick:e[10]||(e[10]=s=>r.PtintBill(i.RecForm.rec_id,"80"))},[Ot,_(" 80mm ")]),t("button",{type:"button",class:"btn btn-warning",onClick:e[11]||(e[11]=s=>r.PtintBill(i.RecForm.rec_id,"a4"))},[Mt,_(" A4 ")])])]),u(F,{name:"slide-fade"},{default:w(()=>[i.rec_form?(c(),d("div",Kt,[t("div",Qt,[t("div",zt,[Ht,m(t("input",{type:"text",class:"form-control",id:"list-name",ref:"list_name","onUpdate:modelValue":e[12]||(e[12]=s=>i.RecListFormEdit.rec_name=s)},null,512),[[g,i.RecListFormEdit.rec_name]])])]),t("div",Wt,[t("div",Xt,[Yt,u(b,{options:o.options,class:"form-control",id:"list-qty",modelValue:i.RecListFormEdit.qty,"onUpdate:modelValue":e[13]||(e[13]=s=>i.RecListFormEdit.qty=s)},null,8,["options","modelValue"])]),t("div",Zt,[$t,t("div",te,[u(b,{options:o.options,class:"form-control text-end",id:"list-price",modelValue:i.RecListFormEdit.price,"onUpdate:modelValue":e[14]||(e[14]=s=>i.RecListFormEdit.price=s)},null,8,["options","modelValue"]),ee])])]),t("div",se,[t("button",{type:"button",class:"btn btn-primary me-2",disabled:r.check_rec_list_form,onClick:e[15]||(e[15]=s=>r.SaveRecList())},[o.loading_post?(c(),d("div",ne,de)):(c(),d("span",ie,"ບັນທຶກ"))],8,oe),t("button",{type:"button",class:"btn btn-label-secondary",onClick:e[16]||(e[16]=(...s)=>r.CancelRecList&&r.CancelRecList(...s))}," ຍົກເລີກ ")])])):l("",!0)]),_:1}),u(F,{name:"slide-fade"},{default:w(()=>[i.rec_form?l("",!0):(c(),d("div",re,[t("div",le,[t("div",ae,[i.RecForm.customer_id?(c(),d("div",_e,[t("span",null,"ລູກຄ້າ: "+a(i.RecForm.customer_name)+" ("+a(i.RecForm.customer_tel)+")",1),he,t("span",null,"ທີ່ຢູ່: "+a(i.RecForm.customer_address),1)])):(c(),d("div",me,"ລູກຄ້າ: ບຸກຄົນທົ່ວໄປ")),t("div",ue,[t("button",{type:"button",class:"btn btn-icon rounded-pill btn-primary","data-bs-toggle":"dropdown","aria-expanded":"false",onClick:e[17]||(e[17]=s=>r.Csearch())},fe),t("div",be,[t("div",ye,[m(t("input",{type:"text",class:"form-control rounded-pill",placeholder:"ຄົ້ນຫາລູກຄ້າ...","onUpdate:modelValue":e[18]||(e[18]=s=>i.SearchCus=s),onKeyup:e[19]||(e[19]=k(s=>r.GetCus(),["enter"])),ref:"search_cus"},null,544),[[g,i.SearchCus]])]),(c(!0),d(y,null,v(i.CustomerData,s=>(c(),d("a",{key:s.id,onClick:f=>r.addCus(s.id,s.name,s.last_name,s.gender,s.tel,s.address),class:"dropdown-item align-middle d-flex align-items-center justify-content-between cursor-pointer"},[t("span",null,[s.gender=="female"?(c(),d("span",ve,"ນ")):l("",!0),_(" "+a(s.name)+" "+a(s.last_name),1)]),Re],8,ge))),128))])])]),t("div",xe,[i.RecForm.status=="padding"||i.RecForm.status=="created"?(c(),d("button",{key:0,type:"button",class:"btn rounded-pill btn-icon btn-info me-2",onClick:e[20]||(e[20]=s=>r.AddRecList())},we)):l("",!0)])]),t("div",Fe,[t("div",Ce,[t("span",Se,[_("ການຊຳລ່ະ: "),i.RecForm.status=="success"?(c(),d("span",Pe,[Le,_(" ຊຳລ່ະແລ້ວ ")])):(c(),d("span",Ee,[De,_(" ຍັງບໍ່ຊຳລ່ະ")]))])]),t("table",Ve,[t("thead",Te,[t("tr",null,[je,Ae,qe,Be,Ge,i.RecForm.status=="padding"||i.RecForm.status=="created"?(c(),d("th",Ie," ຈັດການ ")):l("",!0)])]),t("tbody",null,[(c(!0),d(y,null,v(i.RecListForm,(s,f)=>(c(),d("tr",{key:s.id},[t("td",Ue,a(f+1),1),t("td",null,a(s.rec_name),1),t("td",Ne,a(o.formatPrice(s.price)),1),t("td",Je,a(o.formatPrice(s.qty)),1),t("td",Oe,a(o.formatPrice(s.price*s.qty)),1),i.RecForm.status=="padding"||i.RecForm.status=="created"?(c(),d("td",Me,[t("div",Ke,[Qe,t("div",ze,[t("a",{class:"dropdown-item",href:"javascript:void(0);",onClick:L=>r.EditRecList(s.id)},[We,_(" ແກ້ໄຂ")],8,He),t("a",{class:"dropdown-item",href:"javascript:void(0);",onClick:L=>r.DeleteRecList(s.id)},[Ye,_(" ລຶບ")],8,Xe)])])])):l("",!0)]))),128)),t("tr",null,[Ze,t("td",$e,a(o.formatPrice(r.TotalQty)),1),t("td",ts,a(o.formatPrice(r.TotalSum)),1),i.RecForm.status=="padding"||i.RecForm.status=="created"?(c(),d("td",es)):l("",!0)]),t("tr",null,[ss,t("td",os,[i.RecForm.status=="success"?(c(),d("span",is,a(o.formatPrice(i.PaySetting.rec_discount)),1)):l("",!0),i.RecForm.status=="padding"||i.RecForm.status=="created"?(c(),T(b,{key:1,type:"text",class:"form-control p-1 fs-6 border-danger text-end border-1 me-1",options:o.options,modelValue:i.PaySetting.rec_discount,"onUpdate:modelValue":e[21]||(e[21]=s=>i.PaySetting.rec_discount=s)},null,8,["options","modelValue"])):l("",!0),i.RecForm.status=="padding"||i.RecForm.status=="created"?(c(),d("span",ns)):l("",!0)]),i.RecForm.status=="padding"||i.RecForm.status=="created"?(c(),d("td",cs)):l("",!0)]),t("tr",null,[t("td",ds,[t("div",rs,[_(" ອມພ("+a(JSON.parse(h.store.get_setting).tax_value)+"%) ",1),i.RecForm.status=="padding"||i.RecForm.status=="created"?(c(),d("div",ls,[m(t("input",{class:"form-check-input",type:"checkbox",role:"switch",checked:!1,"onUpdate:modelValue":e[22]||(e[22]=s=>i.PaySetting.rec_vat=s)},null,512),[[C,i.PaySetting.rec_vat]])])):l("",!0)])]),t("td",as,a(o.formatPrice(r.CalVat)),1),i.RecForm.status=="padding"||i.RecForm.status=="created"?(c(),d("td",_s)):l("",!0)])])]),i.RecForm.payed>=r.CalTotal?l("",!0):(c(),d("div",hs,[t("div",ms,[t("div",us,[t("div",ps,[t("div",fs,[t("div",bs,[t("div",ys,[t("span",gs,[t("div",vs,[m(t("input",{class:"form-check-input",type:"radio",id:"formCheck1",name:"payby",value:"cash","onUpdate:modelValue":e[23]||(e[23]=s=>i.PaySetting.PayBy=s)},null,512),[[S,i.PaySetting.PayBy]]),Rs])]),t("span",null,[t("div",xs,[m(t("input",{class:"form-check-input",type:"radio",name:"payby",id:"formCheck2",value:"bank","onUpdate:modelValue":e[24]||(e[24]=s=>i.PaySetting.PayBy=s)},null,512),[[S,i.PaySetting.PayBy]]),ks])])])])])])])])])),i.RecForm.payed>=r.CalTotal?(c(),d("table",Is,[i.RecForm.payed?(c(),d("tr",Us,[Ns,t("td",Js,a(o.formatPrice(r.CalTotal)),1)])):l("",!0)])):(c(),d("table",ws,[i.RecForm.payed?(c(),d("tr",Fs,[Cs,t("td",Ss,a(o.formatPrice(r.CalTotal)),1)])):l("",!0),i.RecForm.payed?(c(),d("tr",Ps,[Ls,t("td",Es,a(o.formatPrice(i.RecForm.payed)),1)])):l("",!0),t("tr",null,[Ds,t("td",Vs,a(o.formatPrice(r.CalTotal-i.RecForm.payed)),1)]),t("tr",null,[Ts,t("td",js,[u(b,{type:"text",class:"form-control text-info p-1 fs-5 fw-bold border-danger text-end border-1 me-1",options:o.options,modelValue:i.PaySetting.customer_pay,"onUpdate:modelValue":e[25]||(e[25]=s=>i.PaySetting.customer_pay=s)},null,8,["options","modelValue"]),As])]),i.PaySetting.customer_pay-(r.CalTotal-i.RecForm.payed)>0?(c(),d("tr",qs,[Bs,t("td",Gs,a(o.formatPrice(i.PaySetting.customer_pay-(r.CalTotal-i.RecForm.payed)))+" ₭ ",1)])):l("",!0)]))]),t("div",Os,[t("div",Ms,[m(t("input",{class:"form-check-input",type:"checkbox",id:"prnt-4a","onUpdate:modelValue":e[26]||(e[26]=s=>i.PrintA4=s)},null,512),[[C,i.PrintA4]]),Ks]),t("button",{type:"button",class:"btn btn-primary me-2",disabled:r.check_rec_form,onClick:e[27]||(e[27]=s=>r.SaveRec())},[o.loading_post?(c(),d("div",Hs,Xs)):(c(),d("span",zs,"ບັນທຶກ"))],8,Qs),Ys])]))]),_:1})])])])])],64)}const to=E(q,[["render",Zs],["__scopeId","data-v-6e65ef4c"]]);export{to as default};
