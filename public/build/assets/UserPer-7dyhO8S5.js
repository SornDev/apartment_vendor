import{_ as f,u as p,m as C,o as n,c as r,b as e,d as R,F as h,h as a,w as i,g as k,y as d,v,t as _,i as u}from"./app-_hB8Ak0D.js";const S={setup(){return{store:p()}},mixins:[C],data(){return{RoleData:[],RoleSeclect:null,RoleForm:{role_name:"",permission_access:""},accdoc:!1,editdoc:!1,deldoc:!1,accrec:!1,editrec:!1,delrec:!1,accacc:!1,editacc:!1,acccus:!1,editcus:!1,delcus:!1,accuser:!1,edituser:!1,deluser:!1,accdocmg:!1,editdocmg:!1,deldocmg:!1,setting:!1,roles:!1,rpinex:!1,rpcashf:!1,RolesPermission:[],RoleSelect:""}},computed:{check_form(){return this.RoleForm.role_name==""}},mounted(){},methods:{SelectRoles(c){this.RolesPermission.includes(c)?this.RolesPermission=this.RolesPermission.filter(m=>m!=c):this.RolesPermission.push(c);let s=this.RoleData.find(m=>m.id==this.RoleSelect);this.RoleForm.permission_access=JSON.stringify(this.RolesPermission),this.RoleForm.role_name=s.role_name,this.EditID=s.id,this.FormType=!1,this.SaveRole()},OnchangRole(){let c=this.RoleData.find(s=>s.id==this.RoleSelect);c?c.permission_access!=null?this.RolesPermission=JSON.parse(c.permission_access):this.RolesPermission=[]:this.RolesPermission=[],this.accdoc=this.RolesPermission.includes("DOC_ACC"),this.editdoc=this.RolesPermission.includes("DOC_ACC_EDIT"),this.deldoc=this.RolesPermission.includes("DOC_ACC_DEL"),this.accrec=this.RolesPermission.includes("REC_ACC"),this.editrec=this.RolesPermission.includes("REC_ACC_EDIT"),this.delrec=this.RolesPermission.includes("REC_ACC_DEL"),this.acccus=this.RolesPermission.includes("CUS_ACC"),this.editcus=this.RolesPermission.includes("CUS_ACC_EDIT"),this.delcus=this.RolesPermission.includes("CUS_ACC_DEL"),this.accacc=this.RolesPermission.includes("ACC_ACC"),this.editacc=this.RolesPermission.includes("ACC_REJECT"),this.accuser=this.RolesPermission.includes("USER_ACC"),this.edituser=this.RolesPermission.includes("USER_ACC_EDIT"),this.deluser=this.RolesPermission.includes("USER_ACC_DEL"),this.accdocmg=this.RolesPermission.includes("DOCMG_ACC"),this.editdocmg=this.RolesPermission.includes("DOCMG_ACC_EDIT"),this.deldocmg=this.RolesPermission.includes("DOCMG_ACC_DEL"),this.setting=this.RolesPermission.includes("SET_ACC"),this.roles=this.RolesPermission.includes("SET_ROLES"),this.rpinex=this.RolesPermission.includes("RP_ACC_IE"),this.rpcashf=this.RolesPermission.includes("RP_ACC_CAS")},AddRole(){this.RoleForm={role_name:"",permission_access:""},this.FormType=!0;var c=new bootstrap.Modal(document.getElementById("role-form"),{keyboard:!1});c.show()},EditRole(c){this.EditID=c,this.FormType=!1,this.GetData(`roles/edit/${c}`,s=>{this.RoleForm=s;var m=new bootstrap.Modal(document.getElementById("role-form"),{keyboard:!1});m.show()})},DeleteRole(c){this.DeleteData("roles/delete",c,s=>{this.getRole()})},SaveRole(){this.FormType?this.AddData("roles/add",this.RoleForm,c=>{this.getRole(),this.$refs.close_role_form.click()}):this.UpdateData(`roles/update/${this.EditID}`,this.RoleForm,c=>{this.RoleSelect==JSON.parse(this.store.get_user).id&&localStorage.setItem("web_permission",JSON.stringify(this.RolesPermission)),this.getRole(),this.$refs.close_role_form.click()})},getRole(){this.GetData("roles/get",c=>{this.RoleData=c})}},created(){this.getRole()}},w={class:"row"},y={class:"col-md-4"},g={class:"card text-start"},x={class:"card-body",style:{position:"relative"}},E={class:"card-title d-flex"},D=e("h5",{class:"mb-0"},"ປະເພດຜູ້ໃຊ້",-1),A={key:0,class:"spinner-grow spinner-grow-sm text-warning ms-2",role:"status"},U=e("span",{class:"visually-hidden"},"Loading...",-1),P=[U],V=e("i",{class:"bx bx-plus fs-3"},null,-1),T=[V],O={class:"demo-inline-spacing mt-3"},I={class:"list-group"},F={class:"dropdown"},L=e("button",{class:"btn btn-icon btn-icon-only",type:"button",id:"dropdownMenuButton1","data-bs-toggle":"dropdown","aria-expanded":"false"},[e("i",{class:"bx bx-dots-vertical-rounded fs-4"})],-1),M={class:"dropdown-menu","aria-labelledby":"dropdownMenuButton1"},G=["onClick"],B=e("i",{class:"bx bx-edit fs-5"},null,-1),N=["onClick"],J=e("i",{class:"bx bx-trash fs-5"},null,-1),j={class:"col-md-8"},q={class:"card"},z={class:"card-body"},H={class:"table-responsive"},K={class:"col-md-12 col-sm-12 col-xl-6"},Q={class:"input-group mb-2"},W=e("label",{class:"input-group-text"},"ເລຶອກປະເພດຜູ້ໃຊ້:",-1),X=e("option",{selected:"",value:""},"ເລືອກ...",-1),Y=["value"],Z={class:"table border"},$=e("thead",null,[e("tr",{class:"text-primary"},[e("th",{scope:"col",width:"180"},"ພາກສ່ວນໃຫ້ເຂົ້າເຖິງ"),e("th",{scope:"col"},"ກຳນົດສິດ")])],-1),ee={class:""},se=e("td",null,"ລາຍການເອກະສານ",-1),le={class:"form-check form-switch mb-2"},oe=["disabled"],te=e("label",{class:"form-check-label",for:"accdoc"}," ສິດເຂົ້າເຖິງ ",-1),ie={class:"form-check form-switch mb-2"},ce=["disabled"],de=e("label",{class:"form-check-label",for:"editdoc"}," ສິດເຂົ້າເຖິງ ການເພີ່ມ ແລະ ອັບເດດ ",-1),ne={class:"form-check form-switch mb-2"},re=["disabled"],me=e("label",{class:"form-check-label",for:"deldoc"}," ສິດເຂົ້າເຖິງ ການລຶບ ",-1),he={class:""},ae=e("td",null,"ໃບບິນ",-1),_e={class:"form-check form-switch mb-2"},ue=["disabled"],be=e("label",{class:"form-check-label",for:"accrec"}," ສິດເຂົ້າເຖິງ ",-1),fe={class:"form-check form-switch mb-2"},pe=["disabled"],Ce=e("label",{class:"form-check-label",for:"editrec"}," ສິດເຂົ້າເຖິງ ການເພີ່ມ ແລະ ອັບເດດ ",-1),Re={class:"form-check form-switch mb-2"},ke=["disabled"],ve=e("label",{class:"form-check-label",for:"delrec"}," ສິດເຂົ້າເຖິງ ການລຶບ ",-1),Se={class:""},we=e("td",null,"ບັນຊີ",-1),ye={class:"form-check form-switch mb-2"},ge=["disabled"],xe=e("label",{class:"form-check-label",for:"accacc"}," ສິດເຂົ້າເຖິງ ",-1),Ee={class:"form-check form-switch mb-2"},De=["disabled"],Ae=e("label",{class:"form-check-label",for:"editacc"}," ສິດເຂົ້າເຖິງ ການເພີ່ມ ແລະ ອັບເດດ ",-1),Ue={class:""},Pe=e("td",null,"ຈັດການຂໍ້ມູນລູກຄ້າ",-1),Ve={class:"form-check form-switch mb-2"},Te=["disabled"],Oe=e("label",{class:"form-check-label",for:"acccus"}," ສິດເຂົ້າເຖິງ ",-1),Ie={class:"form-check form-switch mb-2"},Fe=["disabled"],Le=e("label",{class:"form-check-label",for:"editcus"}," ສິດເຂົ້າເຖິງ ການເພີ່ມ ແລະ ອັບເດດ ",-1),Me={class:"form-check form-switch mb-2"},Ge=["disabled"],Be=e("label",{class:"form-check-label",for:"delcus"}," ສິດເຂົ້າເຖິງ ການລຶບ ",-1),Ne={class:""},Je=e("td",null,"ຈັດການຂໍ້ມູຜູ້ໃຊ້",-1),je={class:"form-check form-switch mb-2"},qe=["disabled"],ze=e("label",{class:"form-check-label",for:"accuser"}," ສິດເຂົ້າເຖິງ ",-1),He={class:"form-check form-switch mb-2"},Ke=["disabled"],Qe=e("label",{class:"form-check-label",for:"edituser"}," ສິດເຂົ້າເຖິງ ການເພີ່ມ ແລະ ອັບເດດ ",-1),We={class:"form-check form-switch mb-2"},Xe=["disabled"],Ye=e("label",{class:"form-check-label",for:"delusers"}," ສິດເຂົ້າເຖິງ ການລຶບ ",-1),Ze={class:""},$e=e("td",null,"ຈັດການຮ່າງເອກະສານ",-1),es={class:"form-check form-switch mb-2"},ss=["disabled"],ls=e("label",{class:"form-check-label",for:"accdocmg"}," ສິດເຂົ້າເຖິງ",-1),os={class:"form-check form-switch mb-2"},ts=["disabled"],is=e("label",{class:"form-check-label",for:"editdocmg"}," ສິດເຂົ້າເຖິງ ການເພີ່ມ ແລະ ອັບເດດ ",-1),cs={class:"form-check form-switch mb-2"},ds=["disabled"],ns=e("label",{class:"form-check-label",for:"deldocmg"}," ສິດເຂົ້າເຖິງ ການລຶບ ",-1),rs={class:""},ms=e("td",null,"ການຕັ້ງຄ່າລະບົບ",-1),hs={class:"form-check form-switch mb-2"},as=["disabled"],_s=e("label",{class:"form-check-label",for:"setting"}," ສິດເຂົ້າເຖິງ ການຕັ້ງຄ່າລະບົບ",-1),us={class:""},bs=e("td",null,"ຈັດການສິດຜູ້ໃຊ້",-1),fs={class:"form-check form-switch mb-2"},ps=["disabled"],Cs=e("label",{class:"form-check-label",for:"roles"}," ສິດເຂົ້າເຖິງ ຈັດການສິດຜູ້ໃຊ້",-1),Rs={class:""},ks=e("td",null,"ລະບົບລາຍງານ",-1),vs={class:"form-check form-switch mb-2"},Ss=["disabled"],ws=e("label",{class:"form-check-label",for:"rpinex"}," ສິດເຂົ້າເຖິງ ລາຍງານ ລາຍຮັບ-ລາຍຈ່າຍ",-1),ys={class:"form-check form-switch mb-2"},gs=["disabled"],xs=e("label",{class:"form-check-label",for:"rpcashf"}," ສິດເຂົ້າເຖິງ ລາຍງານ ຕິດຕາມເງິນສົດ ",-1),Es={class:"modal modal-top modal-md fade","data-bs-backdrop":"static",id:"role-form",tabindex:"-1",style:{display:"none"},"aria-hidden":"true"},Ds={class:"modal-dialog"},As={class:"modal-content"},Us={class:"modal-header"},Ps={type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",ref:"close_role_form"},Vs={class:"modal-body pt-0"},Ts={class:"row mb-2"},Os={class:"col-md-12"},Is=e("label",{for:"f-name",class:"fs-6"},"ຊື່ປະເພດຜູ້ໃຊ້:",-1),Fs={class:"d-flex justify-content-end mt-4"},Ls=["disabled"],Ms={key:0},Gs={key:1,class:"spinner-border text-warning",role:"status"},Bs=e("span",{class:"visually-hidden"},"Loading...",-1),Ns=[Bs],Js=e("button",{type:"button",class:"btn btn-label-secondary","data-bs-dismiss":"modal"},"ຍົກເລີກ",-1);function js(c,s,m,qs,o,t){return n(),r(h,null,[e("div",w,[e("div",y,[e("div",g,[e("div",x,[e("div",E,[D,c.loading_table?(n(),r("div",A,P)):R("",!0)]),e("button",{onClick:s[0]||(s[0]=l=>t.AddRole()),type:"button",class:"btn rounded-pill btn-icon btn-primary",style:{position:"absolute",top:"12px",right:"12px"}},T),e("div",O,[e("ul",I,[(n(!0),r(h,null,a(o.RoleData,l=>(n(),r("li",{key:l.id,class:"list-group-item d-flex align-items-center justify-content-between"},[e("span",null,_(l.role_name),1),e("div",null,[e("div",F,[L,e("ul",M,[e("li",null,[e("a",{class:"dropdown-item",href:"javascript:void(0)",onClick:b=>t.EditRole(l.id)},[B,u(" ແກ້ໄຂ ")],8,G)]),e("li",null,[e("a",{class:"dropdown-item",href:"javascript:void(0)",onClick:b=>t.DeleteRole(l.id)},[J,u(" ລຶບ ")],8,N)])])])])]))),128))])])])])]),e("div",j,[e("div",q,[e("div",z,[e("div",H,[e("div",K,[e("div",Q,[W,i(e("select",{class:"form-select","onUpdate:modelValue":s[1]||(s[1]=l=>o.RoleSelect=l),onChange:s[2]||(s[2]=l=>t.OnchangRole())},[X,(n(!0),r(h,null,a(o.RoleData,l=>(n(),r("option",{value:l.id,key:l.id},_(l.role_name),9,Y))),128))],544),[[k,o.RoleSelect]])])]),e("table",Z,[$,e("tbody",null,[e("tr",ee,[se,e("td",null,[e("div",le,[i(e("input",{class:"form-check-input me-2","onUpdate:modelValue":s[3]||(s[3]=l=>o.accdoc=l),type:"checkbox",disabled:!o.RoleSelect,onClick:s[4]||(s[4]=l=>t.SelectRoles("DOC_ACC")),role:"switch",id:"accdoc"},null,8,oe),[[d,o.accdoc]]),te]),e("div",ie,[i(e("input",{class:"form-check-input me-2","onUpdate:modelValue":s[5]||(s[5]=l=>o.editdoc=l),type:"checkbox",disabled:!o.RoleSelect,onClick:s[6]||(s[6]=l=>t.SelectRoles("DOC_ACC_EDIT")),role:"switch",id:"editdoc"},null,8,ce),[[d,o.editdoc]]),de]),e("div",ne,[i(e("input",{class:"form-check-input me-2","onUpdate:modelValue":s[7]||(s[7]=l=>o.deldoc=l),type:"checkbox",disabled:!o.RoleSelect,onClick:s[8]||(s[8]=l=>t.SelectRoles("DOC_ACC_DEL")),role:"switch",id:"deldoc"},null,8,re),[[d,o.deldoc]]),me])])]),e("tr",he,[ae,e("td",null,[e("div",_e,[i(e("input",{class:"form-check-input me-2","onUpdate:modelValue":s[9]||(s[9]=l=>o.accrec=l),type:"checkbox",disabled:!o.RoleSelect,onClick:s[10]||(s[10]=l=>t.SelectRoles("REC_ACC")),role:"switch",id:"accrec"},null,8,ue),[[d,o.accrec]]),be]),e("div",fe,[i(e("input",{class:"form-check-input me-2","onUpdate:modelValue":s[11]||(s[11]=l=>o.editrec=l),type:"checkbox",disabled:!o.RoleSelect,onClick:s[12]||(s[12]=l=>t.SelectRoles("REC_ACC_EDIT")),role:"switch",id:"editrec"},null,8,pe),[[d,o.editrec]]),Ce]),e("div",Re,[i(e("input",{class:"form-check-input me-2","onUpdate:modelValue":s[13]||(s[13]=l=>o.delrec=l),type:"checkbox",disabled:!o.RoleSelect,onClick:s[14]||(s[14]=l=>t.SelectRoles("REC_ACC_DEL")),role:"switch",id:"delrec"},null,8,ke),[[d,o.delrec]]),ve])])]),e("tr",Se,[we,e("td",null,[e("div",ye,[i(e("input",{class:"form-check-input me-2","onUpdate:modelValue":s[15]||(s[15]=l=>o.accacc=l),type:"checkbox",disabled:!o.RoleSelect,onClick:s[16]||(s[16]=l=>t.SelectRoles("ACC_ACC")),role:"switch",id:"accacc"},null,8,ge),[[d,o.accacc]]),xe]),e("div",Ee,[i(e("input",{class:"form-check-input me-2","onUpdate:modelValue":s[17]||(s[17]=l=>o.editacc=l),type:"checkbox",disabled:!o.RoleSelect,onClick:s[18]||(s[18]=l=>t.SelectRoles("ACC_REJECT")),role:"switch",id:"editacc"},null,8,De),[[d,o.editacc]]),Ae])])]),e("tr",Ue,[Pe,e("td",null,[e("div",Ve,[i(e("input",{class:"form-check-input me-2","onUpdate:modelValue":s[19]||(s[19]=l=>o.acccus=l),type:"checkbox",disabled:!o.RoleSelect,onClick:s[20]||(s[20]=l=>t.SelectRoles("CUS_ACC")),role:"switch",id:"acccus"},null,8,Te),[[d,o.acccus]]),Oe]),e("div",Ie,[i(e("input",{class:"form-check-input me-2","onUpdate:modelValue":s[21]||(s[21]=l=>o.editcus=l),type:"checkbox",disabled:!o.RoleSelect,onClick:s[22]||(s[22]=l=>t.SelectRoles("CUS_ACC_EDIT")),role:"switch",id:"editcus"},null,8,Fe),[[d,o.editcus]]),Le]),e("div",Me,[i(e("input",{class:"form-check-input me-2","onUpdate:modelValue":s[23]||(s[23]=l=>o.delcus=l),type:"checkbox",disabled:!o.RoleSelect,onClick:s[24]||(s[24]=l=>t.SelectRoles("CUS_ACC_DEL")),role:"switch",id:"delcus"},null,8,Ge),[[d,o.delcus]]),Be])])]),e("tr",Ne,[Je,e("td",null,[e("div",je,[i(e("input",{class:"form-check-input me-2","onUpdate:modelValue":s[25]||(s[25]=l=>o.accuser=l),type:"checkbox",disabled:!o.RoleSelect,onClick:s[26]||(s[26]=l=>t.SelectRoles("USER_ACC")),role:"switch",id:"accuser"},null,8,qe),[[d,o.accuser]]),ze]),e("div",He,[i(e("input",{class:"form-check-input me-2","onUpdate:modelValue":s[27]||(s[27]=l=>o.edituser=l),type:"checkbox",disabled:!o.RoleSelect,onClick:s[28]||(s[28]=l=>t.SelectRoles("USER_ACC_EDIT")),role:"switch",id:"edituser"},null,8,Ke),[[d,o.edituser]]),Qe]),e("div",We,[i(e("input",{class:"form-check-input me-2","onUpdate:modelValue":s[29]||(s[29]=l=>o.deluser=l),type:"checkbox",disabled:!o.RoleSelect,onClick:s[30]||(s[30]=l=>t.SelectRoles("USER_ACC_DEL")),role:"switch",id:"delusers"},null,8,Xe),[[d,o.deluser]]),Ye])])]),e("tr",Ze,[$e,e("td",null,[e("div",es,[i(e("input",{class:"form-check-input me-2","onUpdate:modelValue":s[31]||(s[31]=l=>o.accdocmg=l),type:"checkbox",disabled:!o.RoleSelect,onClick:s[32]||(s[32]=l=>t.SelectRoles("DOCMG_ACC")),role:"switch",id:"accdocmg"},null,8,ss),[[d,o.accdocmg]]),ls]),e("div",os,[i(e("input",{class:"form-check-input me-2","onUpdate:modelValue":s[33]||(s[33]=l=>o.editdocmg=l),type:"checkbox",disabled:!o.RoleSelect,onClick:s[34]||(s[34]=l=>t.SelectRoles("DOCMG_ACC_EDIT")),role:"switch",id:"editdocmg"},null,8,ts),[[d,o.editdocmg]]),is]),e("div",cs,[i(e("input",{class:"form-check-input me-2","onUpdate:modelValue":s[35]||(s[35]=l=>o.deldocmg=l),type:"checkbox",disabled:!o.RoleSelect,onClick:s[36]||(s[36]=l=>t.SelectRoles("DOCMG_ACC_DEL")),role:"switch",id:"deldocmg"},null,8,ds),[[d,o.deldocmg]]),ns])])]),e("tr",rs,[ms,e("td",null,[e("div",hs,[i(e("input",{class:"form-check-input me-2","onUpdate:modelValue":s[37]||(s[37]=l=>o.setting=l),type:"checkbox",disabled:!o.RoleSelect,onClick:s[38]||(s[38]=l=>t.SelectRoles("SET_ACC")),role:"switch",id:"setting"},null,8,as),[[d,o.setting]]),_s])])]),e("tr",us,[bs,e("td",null,[e("div",fs,[i(e("input",{class:"form-check-input me-2","onUpdate:modelValue":s[39]||(s[39]=l=>o.roles=l),type:"checkbox",disabled:!o.RoleSelect,onClick:s[40]||(s[40]=l=>t.SelectRoles("SET_ROLES")),role:"switch",id:"roles"},null,8,ps),[[d,o.roles]]),Cs])])]),e("tr",Rs,[ks,e("td",null,[e("div",vs,[i(e("input",{class:"form-check-input me-2","onUpdate:modelValue":s[41]||(s[41]=l=>o.rpinex=l),type:"checkbox",disabled:!o.RoleSelect,onClick:s[42]||(s[42]=l=>t.SelectRoles("RP_ACC_IE")),role:"switch",id:"rpinex"},null,8,Ss),[[d,o.rpinex]]),ws]),e("div",ys,[i(e("input",{class:"form-check-input me-2","onUpdate:modelValue":s[43]||(s[43]=l=>o.rpcashf=l),type:"checkbox",disabled:!o.RoleSelect,onClick:s[44]||(s[44]=l=>t.SelectRoles("RP_ACC_CAS")),role:"switch",id:"rpcashf"},null,8,gs),[[d,o.rpcashf]]),xs])])])])])])])])])]),e("div",Es,[e("div",Ds,[e("form",As,[e("div",Us,[e("button",Ps,null,512)]),e("div",Vs,[e("div",Ts,[e("div",Os,[Is,i(e("input",{class:"form-control",type:"text",id:"f-name","onUpdate:modelValue":s[45]||(s[45]=l=>o.RoleForm.role_name=l),placeholder:"..."},null,512),[[v,o.RoleForm.role_name]])])]),e("div",Fs,[e("button",{type:"button",class:"btn btn-primary me-2",disabled:t.check_form,onClick:s[46]||(s[46]=l=>t.SaveRole())},[c.loading_post?(n(),r("div",Gs,Ns)):(n(),r("span",Ms,"ບັນທຶກ"))],8,Ls),Js])])])])])],64)}const Hs=f(S,[["render",js]]);export{Hs as default};
