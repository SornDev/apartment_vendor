import{m as f}from"./ulmixins-3GuYya29.js";import{_ as p,u as C,c as n,a as e,F as h,r as a,w as i,m as R,x as d,h as k,o as r,t as _,b as u}from"./app-R5zms-zh.js";const v={setup(){return{store:C()}},mixins:[f],data(){return{RoleData:[],RoleSeclect:null,RoleForm:{role_name:"",permission_access:""},accdoc:!1,editdoc:!1,deldoc:!1,accrec:!1,editrec:!1,delrec:!1,accacc:!1,editacc:!1,acccus:!1,editcus:!1,delcus:!1,accuser:!1,edituser:!1,deluser:!1,accdocmg:!1,editdocmg:!1,deldocmg:!1,setting:!1,roles:!1,rpinex:!1,rpcashf:!1,RolesPermission:[],RoleSelect:""}},computed:{check_form(){return this.RoleForm.role_name==""}},mounted(){},methods:{SelectRoles(c){this.RolesPermission.includes(c)?this.RolesPermission=this.RolesPermission.filter(m=>m!=c):this.RolesPermission.push(c);let s=this.RoleData.find(m=>m.id==this.RoleSelect);this.RoleForm.permission_access=JSON.stringify(this.RolesPermission),this.RoleForm.role_name=s.role_name,this.EditID=s.id,this.FormType=!1,this.SaveRole()},OnchangRole(){let c=this.RoleData.find(s=>s.id==this.RoleSelect);c?c.permission_access!=null?this.RolesPermission=JSON.parse(c.permission_access):this.RolesPermission=[]:this.RolesPermission=[],this.accdoc=this.RolesPermission.includes("DOC_ACC"),this.editdoc=this.RolesPermission.includes("DOC_ACC_EDIT"),this.deldoc=this.RolesPermission.includes("DOC_ACC_DEL"),this.accrec=this.RolesPermission.includes("REC_ACC"),this.editrec=this.RolesPermission.includes("REC_ACC_EDIT"),this.delrec=this.RolesPermission.includes("REC_ACC_DEL"),this.acccus=this.RolesPermission.includes("CUS_ACC"),this.editcus=this.RolesPermission.includes("CUS_ACC_EDIT"),this.delcus=this.RolesPermission.includes("CUS_ACC_DEL"),this.accacc=this.RolesPermission.includes("ACC_ACC"),this.editacc=this.RolesPermission.includes("ACC_REJECT"),this.accuser=this.RolesPermission.includes("USER_ACC"),this.edituser=this.RolesPermission.includes("USER_ACC_EDIT"),this.deluser=this.RolesPermission.includes("USER_ACC_DEL"),this.accdocmg=this.RolesPermission.includes("DOCMG_ACC"),this.editdocmg=this.RolesPermission.includes("DOCMG_ACC_EDIT"),this.deldocmg=this.RolesPermission.includes("DOCMG_ACC_DEL"),this.setting=this.RolesPermission.includes("SET_ACC"),this.roles=this.RolesPermission.includes("SET_ROLES"),this.rpinex=this.RolesPermission.includes("RP_ACC_IE"),this.rpcashf=this.RolesPermission.includes("RP_ACC_CAS")},AddRole(){this.RoleForm={role_name:"",permission_access:""},this.FormType=!0;var c=new bootstrap.Modal(document.getElementById("role-form"),{keyboard:!1});c.show()},EditRole(c){this.EditID=c,this.FormType=!1,this.GetData(`roles/edit/${c}`,s=>{this.RoleForm=s;var m=new bootstrap.Modal(document.getElementById("role-form"),{keyboard:!1});m.show()})},DeleteRole(c){this.DeleteData("roles/delete",c,s=>{this.getRole()})},SaveRole(){this.FormType?this.AddData("roles/add",this.RoleForm,c=>{this.getRole(),this.$refs.close_role_form.click()}):this.UpdateData(`roles/update/${this.EditID}`,this.RoleForm,c=>{this.RoleSelect==JSON.parse(this.store.get_user).id&&localStorage.setItem("web_permission",JSON.stringify(this.RolesPermission)),this.getRole(),this.$refs.close_role_form.click()})},getRole(){this.GetData("roles/get",c=>{this.RoleData=c})}},created(){this.getRole()}},S={class:"row"},w={class:"col-md-4"},y={class:"card text-start"},x={class:"card-body",style:{position:"relative"}},g=e("h5",{class:"card-title"},"ປະເພດຜູ້ໃຊ້",-1),E=e("i",{class:"bx bx-plus fs-3"},null,-1),D=[E],A={class:"demo-inline-spacing mt-3"},U={class:"list-group"},P={class:"dropdown"},V=e("button",{class:"btn btn-icon btn-icon-only",type:"button",id:"dropdownMenuButton1","data-bs-toggle":"dropdown","aria-expanded":"false"},[e("i",{class:"bx bx-dots-vertical-rounded fs-4"})],-1),T={class:"dropdown-menu","aria-labelledby":"dropdownMenuButton1"},O=["onClick"],I=e("i",{class:"bx bx-edit fs-5"},null,-1),F=["onClick"],L=e("i",{class:"bx bx-trash fs-5"},null,-1),M={class:"col-md-8"},G={class:"card"},B={class:"card-body"},J={class:"table-responsive"},N={class:"col-md-12 col-sm-12 col-xl-6"},j={class:"input-group mb-2"},q=e("label",{class:"input-group-text"},"ເລຶອກປະເພດຜູ້ໃຊ້:",-1),z=e("option",{selected:"",value:""},"ເລືອກ...",-1),H=["value"],K={class:"table border"},Q=e("thead",null,[e("tr",{class:"text-primary"},[e("th",{scope:"col",width:"180"},"ພາກສ່ວນໃຫ້ເຂົ້າເຖິງ"),e("th",{scope:"col"},"ກຳນົດສິດ")])],-1),W={class:""},X=e("td",null,"ລາຍການເອກະສານ",-1),Y={class:"form-check form-switch mb-2"},Z=["disabled"],$=e("label",{class:"form-check-label",for:"accdoc"}," ສິດເຂົ້າເຖິງ ",-1),ee={class:"form-check form-switch mb-2"},se=["disabled"],le=e("label",{class:"form-check-label",for:"editdoc"}," ສິດເຂົ້າເຖິງ ການເພີ່ມ ແລະ ອັບເດດ ",-1),oe={class:"form-check form-switch mb-2"},te=["disabled"],ie=e("label",{class:"form-check-label",for:"deldoc"}," ສິດເຂົ້າເຖິງ ການລຶບ ",-1),ce={class:""},de=e("td",null,"ໃບບິນ",-1),ne={class:"form-check form-switch mb-2"},re=["disabled"],me=e("label",{class:"form-check-label",for:"accrec"}," ສິດເຂົ້າເຖິງ ",-1),he={class:"form-check form-switch mb-2"},ae=["disabled"],_e=e("label",{class:"form-check-label",for:"editrec"}," ສິດເຂົ້າເຖິງ ການເພີ່ມ ແລະ ອັບເດດ ",-1),ue={class:"form-check form-switch mb-2"},be=["disabled"],fe=e("label",{class:"form-check-label",for:"delrec"}," ສິດເຂົ້າເຖິງ ການລຶບ ",-1),pe={class:""},Ce=e("td",null,"ບັນຊີ",-1),Re={class:"form-check form-switch mb-2"},ke=["disabled"],ve=e("label",{class:"form-check-label",for:"accacc"}," ສິດເຂົ້າເຖິງ ",-1),Se={class:"form-check form-switch mb-2"},we=["disabled"],ye=e("label",{class:"form-check-label",for:"editacc"}," ສິດເຂົ້າເຖິງ ການເພີ່ມ ແລະ ອັບເດດ ",-1),xe={class:""},ge=e("td",null,"ຈັດການຂໍ້ມູນລູກຄ້າ",-1),Ee={class:"form-check form-switch mb-2"},De=["disabled"],Ae=e("label",{class:"form-check-label",for:"acccus"}," ສິດເຂົ້າເຖິງ ",-1),Ue={class:"form-check form-switch mb-2"},Pe=["disabled"],Ve=e("label",{class:"form-check-label",for:"editcus"}," ສິດເຂົ້າເຖິງ ການເພີ່ມ ແລະ ອັບເດດ ",-1),Te={class:"form-check form-switch mb-2"},Oe=["disabled"],Ie=e("label",{class:"form-check-label",for:"delcus"}," ສິດເຂົ້າເຖິງ ການລຶບ ",-1),Fe={class:""},Le=e("td",null,"ຈັດການຂໍ້ມູຜູ້ໃຊ້",-1),Me={class:"form-check form-switch mb-2"},Ge=["disabled"],Be=e("label",{class:"form-check-label",for:"accuser"}," ສິດເຂົ້າເຖິງ ",-1),Je={class:"form-check form-switch mb-2"},Ne=["disabled"],je=e("label",{class:"form-check-label",for:"edituser"}," ສິດເຂົ້າເຖິງ ການເພີ່ມ ແລະ ອັບເດດ ",-1),qe={class:"form-check form-switch mb-2"},ze=["disabled"],He=e("label",{class:"form-check-label",for:"delusers"}," ສິດເຂົ້າເຖິງ ການລຶບ ",-1),Ke={class:""},Qe=e("td",null,"ຈັດການຮ່າງເອກະສານ",-1),We={class:"form-check form-switch mb-2"},Xe=["disabled"],Ye=e("label",{class:"form-check-label",for:"accdocmg"}," ສິດເຂົ້າເຖິງ",-1),Ze={class:"form-check form-switch mb-2"},$e=["disabled"],es=e("label",{class:"form-check-label",for:"editdocmg"}," ສິດເຂົ້າເຖິງ ການເພີ່ມ ແລະ ອັບເດດ ",-1),ss={class:"form-check form-switch mb-2"},ls=["disabled"],os=e("label",{class:"form-check-label",for:"deldocmg"}," ສິດເຂົ້າເຖິງ ການລຶບ ",-1),ts={class:""},is=e("td",null,"ການຕັ້ງຄ່າລະບົບ",-1),cs={class:"form-check form-switch mb-2"},ds=["disabled"],ns=e("label",{class:"form-check-label",for:"setting"}," ສິດເຂົ້າເຖິງ ການຕັ້ງຄ່າລະບົບ",-1),rs={class:""},ms=e("td",null,"ຈັດການສິດຜູ້ໃຊ້",-1),hs={class:"form-check form-switch mb-2"},as=["disabled"],_s=e("label",{class:"form-check-label",for:"roles"}," ສິດເຂົ້າເຖິງ ຈັດການສິດຜູ້ໃຊ້",-1),us={class:""},bs=e("td",null,"ລະບົບລາຍງານ",-1),fs={class:"form-check form-switch mb-2"},ps=["disabled"],Cs=e("label",{class:"form-check-label",for:"rpinex"}," ສິດເຂົ້າເຖິງ ລາຍງານ ລາຍຮັບ-ລາຍຈ່າຍ",-1),Rs={class:"form-check form-switch mb-2"},ks=["disabled"],vs=e("label",{class:"form-check-label",for:"rpcashf"}," ສິດເຂົ້າເຖິງ ລາຍງານ ຕິດຕາມເງິນສົດ ",-1),Ss={class:"modal modal-top modal-md fade","data-bs-backdrop":"static",id:"role-form",tabindex:"-1",style:{display:"none"},"aria-hidden":"true"},ws={class:"modal-dialog"},ys={class:"modal-content"},xs={class:"modal-header"},gs={type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",ref:"close_role_form"},Es={class:"modal-body pt-0"},Ds={class:"row mb-2"},As={class:"col-md-12"},Us=e("label",{for:"f-name",class:"fs-6"},"ຊື່ປະເພດຜູ້ໃຊ້:",-1),Ps={class:"d-flex justify-content-end mt-4"},Vs=["disabled"],Ts={key:0},Os={key:1,class:"spinner-border text-warning",role:"status"},Is=e("span",{class:"visually-hidden"},"Loading...",-1),Fs=[Is],Ls=e("button",{type:"button",class:"btn btn-label-secondary","data-bs-dismiss":"modal"},"ຍົກເລີກ",-1);function Ms(c,s,m,Gs,o,t){return r(),n(h,null,[e("div",S,[e("div",w,[e("div",y,[e("div",x,[g,e("button",{onClick:s[0]||(s[0]=l=>t.AddRole()),type:"button",class:"btn rounded-pill btn-icon btn-primary",style:{position:"absolute",top:"12px",right:"12px"}},D),e("div",A,[e("ul",U,[(r(!0),n(h,null,a(o.RoleData,l=>(r(),n("li",{key:l.id,class:"list-group-item d-flex align-items-center justify-content-between"},[e("span",null,_(l.role_name),1),e("div",null,[e("div",P,[V,e("ul",T,[e("li",null,[e("a",{class:"dropdown-item",href:"javascript:void(0)",onClick:b=>t.EditRole(l.id)},[I,u(" ແກ້ໄຂ ")],8,O)]),e("li",null,[e("a",{class:"dropdown-item",href:"javascript:void(0)",onClick:b=>t.DeleteRole(l.id)},[L,u(" ລຶບ ")],8,F)])])])])]))),128))])])])])]),e("div",M,[e("div",G,[e("div",B,[e("div",J,[e("div",N,[e("div",j,[q,i(e("select",{class:"form-select","onUpdate:modelValue":s[1]||(s[1]=l=>o.RoleSelect=l),onChange:s[2]||(s[2]=l=>t.OnchangRole())},[z,(r(!0),n(h,null,a(o.RoleData,l=>(r(),n("option",{value:l.id,key:l.id},_(l.role_name),9,H))),128))],544),[[R,o.RoleSelect]])])]),e("table",K,[Q,e("tbody",null,[e("tr",W,[X,e("td",null,[e("div",Y,[i(e("input",{class:"form-check-input me-2","onUpdate:modelValue":s[3]||(s[3]=l=>o.accdoc=l),type:"checkbox",disabled:!o.RoleSelect,onClick:s[4]||(s[4]=l=>t.SelectRoles("DOC_ACC")),role:"switch",id:"accdoc"},null,8,Z),[[d,o.accdoc]]),$]),e("div",ee,[i(e("input",{class:"form-check-input me-2","onUpdate:modelValue":s[5]||(s[5]=l=>o.editdoc=l),type:"checkbox",disabled:!o.RoleSelect,onClick:s[6]||(s[6]=l=>t.SelectRoles("DOC_ACC_EDIT")),role:"switch",id:"editdoc"},null,8,se),[[d,o.editdoc]]),le]),e("div",oe,[i(e("input",{class:"form-check-input me-2","onUpdate:modelValue":s[7]||(s[7]=l=>o.deldoc=l),type:"checkbox",disabled:!o.RoleSelect,onClick:s[8]||(s[8]=l=>t.SelectRoles("DOC_ACC_DEL")),role:"switch",id:"deldoc"},null,8,te),[[d,o.deldoc]]),ie])])]),e("tr",ce,[de,e("td",null,[e("div",ne,[i(e("input",{class:"form-check-input me-2","onUpdate:modelValue":s[9]||(s[9]=l=>o.accrec=l),type:"checkbox",disabled:!o.RoleSelect,onClick:s[10]||(s[10]=l=>t.SelectRoles("REC_ACC")),role:"switch",id:"accrec"},null,8,re),[[d,o.accrec]]),me]),e("div",he,[i(e("input",{class:"form-check-input me-2","onUpdate:modelValue":s[11]||(s[11]=l=>o.editrec=l),type:"checkbox",disabled:!o.RoleSelect,onClick:s[12]||(s[12]=l=>t.SelectRoles("REC_ACC_EDIT")),role:"switch",id:"editrec"},null,8,ae),[[d,o.editrec]]),_e]),e("div",ue,[i(e("input",{class:"form-check-input me-2","onUpdate:modelValue":s[13]||(s[13]=l=>o.delrec=l),type:"checkbox",disabled:!o.RoleSelect,onClick:s[14]||(s[14]=l=>t.SelectRoles("REC_ACC_DEL")),role:"switch",id:"delrec"},null,8,be),[[d,o.delrec]]),fe])])]),e("tr",pe,[Ce,e("td",null,[e("div",Re,[i(e("input",{class:"form-check-input me-2","onUpdate:modelValue":s[15]||(s[15]=l=>o.accacc=l),type:"checkbox",disabled:!o.RoleSelect,onClick:s[16]||(s[16]=l=>t.SelectRoles("ACC_ACC")),role:"switch",id:"accacc"},null,8,ke),[[d,o.accacc]]),ve]),e("div",Se,[i(e("input",{class:"form-check-input me-2","onUpdate:modelValue":s[17]||(s[17]=l=>o.editacc=l),type:"checkbox",disabled:!o.RoleSelect,onClick:s[18]||(s[18]=l=>t.SelectRoles("ACC_REJECT")),role:"switch",id:"editacc"},null,8,we),[[d,o.editacc]]),ye])])]),e("tr",xe,[ge,e("td",null,[e("div",Ee,[i(e("input",{class:"form-check-input me-2","onUpdate:modelValue":s[19]||(s[19]=l=>o.acccus=l),type:"checkbox",disabled:!o.RoleSelect,onClick:s[20]||(s[20]=l=>t.SelectRoles("CUS_ACC")),role:"switch",id:"acccus"},null,8,De),[[d,o.acccus]]),Ae]),e("div",Ue,[i(e("input",{class:"form-check-input me-2","onUpdate:modelValue":s[21]||(s[21]=l=>o.editcus=l),type:"checkbox",disabled:!o.RoleSelect,onClick:s[22]||(s[22]=l=>t.SelectRoles("CUS_ACC_EDIT")),role:"switch",id:"editcus"},null,8,Pe),[[d,o.editcus]]),Ve]),e("div",Te,[i(e("input",{class:"form-check-input me-2","onUpdate:modelValue":s[23]||(s[23]=l=>o.delcus=l),type:"checkbox",disabled:!o.RoleSelect,onClick:s[24]||(s[24]=l=>t.SelectRoles("CUS_ACC_DEL")),role:"switch",id:"delcus"},null,8,Oe),[[d,o.delcus]]),Ie])])]),e("tr",Fe,[Le,e("td",null,[e("div",Me,[i(e("input",{class:"form-check-input me-2","onUpdate:modelValue":s[25]||(s[25]=l=>o.accuser=l),type:"checkbox",disabled:!o.RoleSelect,onClick:s[26]||(s[26]=l=>t.SelectRoles("USER_ACC")),role:"switch",id:"accuser"},null,8,Ge),[[d,o.accuser]]),Be]),e("div",Je,[i(e("input",{class:"form-check-input me-2","onUpdate:modelValue":s[27]||(s[27]=l=>o.edituser=l),type:"checkbox",disabled:!o.RoleSelect,onClick:s[28]||(s[28]=l=>t.SelectRoles("USER_ACC_EDIT")),role:"switch",id:"edituser"},null,8,Ne),[[d,o.edituser]]),je]),e("div",qe,[i(e("input",{class:"form-check-input me-2","onUpdate:modelValue":s[29]||(s[29]=l=>o.deluser=l),type:"checkbox",disabled:!o.RoleSelect,onClick:s[30]||(s[30]=l=>t.SelectRoles("USER_ACC_DEL")),role:"switch",id:"delusers"},null,8,ze),[[d,o.deluser]]),He])])]),e("tr",Ke,[Qe,e("td",null,[e("div",We,[i(e("input",{class:"form-check-input me-2","onUpdate:modelValue":s[31]||(s[31]=l=>o.accdocmg=l),type:"checkbox",disabled:!o.RoleSelect,onClick:s[32]||(s[32]=l=>t.SelectRoles("DOCMG_ACC")),role:"switch",id:"accdocmg"},null,8,Xe),[[d,o.accdocmg]]),Ye]),e("div",Ze,[i(e("input",{class:"form-check-input me-2","onUpdate:modelValue":s[33]||(s[33]=l=>o.editdocmg=l),type:"checkbox",disabled:!o.RoleSelect,onClick:s[34]||(s[34]=l=>t.SelectRoles("DOCMG_ACC_EDIT")),role:"switch",id:"editdocmg"},null,8,$e),[[d,o.editdocmg]]),es]),e("div",ss,[i(e("input",{class:"form-check-input me-2","onUpdate:modelValue":s[35]||(s[35]=l=>o.deldocmg=l),type:"checkbox",disabled:!o.RoleSelect,onClick:s[36]||(s[36]=l=>t.SelectRoles("DOCMG_ACC_DEL")),role:"switch",id:"deldocmg"},null,8,ls),[[d,o.deldocmg]]),os])])]),e("tr",ts,[is,e("td",null,[e("div",cs,[i(e("input",{class:"form-check-input me-2","onUpdate:modelValue":s[37]||(s[37]=l=>o.setting=l),type:"checkbox",disabled:!o.RoleSelect,onClick:s[38]||(s[38]=l=>t.SelectRoles("SET_ACC")),role:"switch",id:"setting"},null,8,ds),[[d,o.setting]]),ns])])]),e("tr",rs,[ms,e("td",null,[e("div",hs,[i(e("input",{class:"form-check-input me-2","onUpdate:modelValue":s[39]||(s[39]=l=>o.roles=l),type:"checkbox",disabled:!o.RoleSelect,onClick:s[40]||(s[40]=l=>t.SelectRoles("SET_ROLES")),role:"switch",id:"roles"},null,8,as),[[d,o.roles]]),_s])])]),e("tr",us,[bs,e("td",null,[e("div",fs,[i(e("input",{class:"form-check-input me-2","onUpdate:modelValue":s[41]||(s[41]=l=>o.rpinex=l),type:"checkbox",disabled:!o.RoleSelect,onClick:s[42]||(s[42]=l=>t.SelectRoles("RP_ACC_IE")),role:"switch",id:"rpinex"},null,8,ps),[[d,o.rpinex]]),Cs]),e("div",Rs,[i(e("input",{class:"form-check-input me-2","onUpdate:modelValue":s[43]||(s[43]=l=>o.rpcashf=l),type:"checkbox",disabled:!o.RoleSelect,onClick:s[44]||(s[44]=l=>t.SelectRoles("RP_ACC_CAS")),role:"switch",id:"rpcashf"},null,8,ks),[[d,o.rpcashf]]),vs])])])])])])])])])]),e("div",Ss,[e("div",ws,[e("form",ys,[e("div",xs,[e("button",gs,null,512)]),e("div",Es,[e("div",Ds,[e("div",As,[Us,i(e("input",{class:"form-control",type:"text",id:"f-name","onUpdate:modelValue":s[45]||(s[45]=l=>o.RoleForm.role_name=l),placeholder:"..."},null,512),[[k,o.RoleForm.role_name]])])]),e("div",Ps,[e("button",{type:"button",class:"btn btn-primary me-2",disabled:t.check_form,onClick:s[46]||(s[46]=l=>t.SaveRole())},[c.loading_post?(r(),n("div",Os,Fs)):(r(),n("span",Ts,"ບັນທຶກ"))],8,Vs),Ls])])])])])],64)}const Ns=p(v,[["render",Ms]]);export{Ns as default};
